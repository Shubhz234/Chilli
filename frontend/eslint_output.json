[{"filePath":"C:\\shubham\\Chilli\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\components\\Footer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\components\\Navbar.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":46,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":25},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":46,"column":27,"nodeType":"BlockStatement","messageId":"unexpected","endLine":46,"endColumn":30,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[1933,1934],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleMarkRead' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":53,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleMarkRead"},"fix":{"range":[2120,2476],"text":""},"desc":"Remove unused variable 'handleMarkRead'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport { ChefHat, Search, User, Menu, X, Plus, Activity, Bell, CheckCircle2 } from 'lucide-react';\r\n\r\nconst Navbar = () => {\r\n    const [isScrolled, setIsScrolled] = useState(false);\r\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n    const [isSearchOpen, setIsSearchOpen] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [user, setUser] = useState(null);\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n\r\n    const [notifications, setNotifications] = useState([]);\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n    React.useEffect(() => {\r\n        const checkUser = () => {\r\n            const stored = localStorage.getItem('chilli_user');\r\n            if (stored) setUser(JSON.parse(stored));\r\n            else setUser(null);\r\n        };\r\n        checkUser();\r\n        window.addEventListener('authStatusChanged', checkUser);\r\n\r\n        const handleScroll = () => {\r\n            setIsScrolled(window.scrollY > 20);\r\n        };\r\n        window.addEventListener('scroll', handleScroll);\r\n        return () => {\r\n            window.removeEventListener('scroll', handleScroll);\r\n            window.removeEventListener('authStatusChanged', checkUser);\r\n        };\r\n    }, []);\r\n\r\n    React.useEffect(() => {\r\n        if (!user?.id) return;\r\n        const fetchNotifications = async () => {\r\n            try {\r\n                const res = await fetch(`/api/users/${user.id}`);\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    setNotifications((data.notifications || []).sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)));\r\n                    setUnreadCount((data.notifications || []).filter(n => !n.read).length);\r\n                }\r\n            } catch (err) { }\r\n        };\r\n        fetchNotifications();\r\n        const interval = setInterval(fetchNotifications, 15000);\r\n        return () => clearInterval(interval);\r\n    }, [user?.id]);\r\n\r\n    const handleMarkRead = async () => {\r\n        if (!user?.id) return;\r\n        try {\r\n            await fetch(`/api/users/${user.id}/notifications/read`, { method: 'PUT' });\r\n            setNotifications(notifications.map(n => ({ ...n, read: true })));\r\n            setUnreadCount(0);\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n    const baseNavLinks = [\r\n        { name: 'Home', path: '/' },\r\n        { name: 'Recipes', path: '/recipes' },\r\n        { name: 'Categories', path: '/categories' },\r\n        { name: 'Favourites', path: '/favourites' },\r\n        { name: 'Chilli AI', path: '/chilli-ai' },\r\n    ];\r\n\r\n    const navLinks = user?.isAdmin\r\n        ? [...baseNavLinks, { name: 'Admin Panel', path: '/admin' }]\r\n        : baseNavLinks;\r\n\r\n    return (\r\n        <nav\r\n            className={`fixed w-full z-[100] transition-all duration-300 ${isScrolled\r\n                ? 'bg-white/95 backdrop-blur-xl shadow-md py-3 border-b border-gray-100'\r\n                : 'bg-white/80 backdrop-blur-md shadow-sm py-4 border-b border-gray-100'\r\n                }`}\r\n        >\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"flex justify-between items-center\">\r\n                    {/* Logo */}\r\n                    <Link to=\"/\" className=\"flex items-center gap-2 group\">\r\n                        <div className=\"p-2 bg-gradient-to-br from-primary-500 to-orange-500 rounded-xl group-hover:rotate-12 transition-transform duration-300\">\r\n                            <ChefHat className=\"w-6 h-6 text-white\" />\r\n                        </div>\r\n                        <span className=\"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300\">\r\n                            Chilli\r\n                        </span>\r\n                    </Link>\r\n\r\n                    {/* Desktop Navigation */}\r\n                    <div className=\"hidden lg:flex items-center space-x-8\">\r\n                        <div className=\"flex space-x-6 relative\">\r\n                            {navLinks.map((link) => (\r\n                                <Link\r\n                                    key={link.name}\r\n                                    to={link.path}\r\n                                    className={`text-sm font-bold transition-all relative group ${location.pathname === link.path\r\n                                        ? 'text-primary-600'\r\n                                        : 'text-gray-600 hover:text-primary-500'\r\n                                        }`}\r\n                                >\r\n                                    {link.name === 'Chilli AI' && (\r\n                                        <span className=\"absolute -top-1.5 -right-3 flex h-3 w-3\">\r\n                                            <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75\"></span>\r\n                                            <span className=\"relative inline-flex rounded-full h-4 w-4 bg-gradient-to-tr from-orange-400 to-red-500\"></span>\r\n                                        </span>\r\n                                    )}\r\n                                    {link.name}\r\n                                    <span className={`absolute -bottom-1 left-0 h-0.5 bg-primary-500 transition-all duration-300 ${location.pathname === link.path ? 'w-full' : 'w-0 group-hover:w-full'}`}></span>\r\n                                </Link>\r\n                            ))}\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center space-x-4\">\r\n                            {isSearchOpen ? (\r\n                                <form\r\n                                    onSubmit={(e) => {\r\n                                        e.preventDefault();\r\n                                        if (searchTerm.trim()) {\r\n                                            navigate('/recipes', { state: { searchTerm: searchTerm.trim() } });\r\n                                        } else {\r\n                                            navigate('/recipes');\r\n                                        }\r\n                                        setIsSearchOpen(false);\r\n                                        setSearchTerm('');\r\n                                    }}\r\n                                    className=\"flex items-center bg-gray-100 rounded-full px-3 py-1.5 animate-fade-in\"\r\n                                >\r\n                                    <Search className=\"w-4 h-4 text-gray-400 mr-2\" />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={searchTerm}\r\n                                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                                        placeholder=\"Search recipes...\"\r\n                                        className=\"bg-transparent border-none focus:outline-none text-sm w-32 md:w-48 text-gray-700\"\r\n                                        autoFocus\r\n                                        onBlur={() => {\r\n                                            if (!searchTerm) setIsSearchOpen(false);\r\n                                        }}\r\n                                    />\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setIsSearchOpen(false)}\r\n                                        className=\"text-gray-400 hover:text-gray-600 ml-1\"\r\n                                    >\r\n                                        <X className=\"w-4 h-4\" />\r\n                                    </button>\r\n                                </form>\r\n                            ) : (\r\n                                <button\r\n                                    onClick={() => setIsSearchOpen(true)}\r\n                                    className=\"p-2 text-gray-600 hover:text-primary-500 hover:bg-primary-50 rounded-full transition-colors\"\r\n                                >\r\n                                    <Search className=\"w-5 h-5\" />\r\n                                </button>\r\n                            )}\r\n                            {user ? (\r\n                                <div className=\"flex items-center gap-3 relative\">\r\n                                    <Link\r\n                                        to=\"/notifications\"\r\n                                        className=\"relative p-2 text-gray-600 hover:text-primary-500 hover:bg-primary-50 rounded-full transition-colors\"\r\n                                    >\r\n                                        <Bell className=\"w-5 h-5\" />\r\n                                        {unreadCount > 0 && (\r\n                                            <span className=\"absolute top-1 right-1 w-2.5 h-2.5 bg-rose-500 rounded-full border-2 border-white\"></span>\r\n                                        )}\r\n                                    </Link>\r\n                                    <Link\r\n                                        to=\"/feed\"\r\n                                        className=\"hidden lg:flex items-center gap-2 px-4 py-2 rounded-full border border-gray-200 hover:border-primary-500 bg-white text-gray-700 transition-all text-sm font-bold shadow-sm hover:text-primary-600\"\r\n                                    >\r\n                                        <Activity className=\"w-4 h-4\" />\r\n                                        Feed\r\n                                    </Link>\r\n                                    {!user?.isAdmin && (\r\n                                        <Link\r\n                                            to=\"/upload\"\r\n                                            className=\"hidden lg:flex items-center gap-2 px-4 py-2 rounded-full bg-primary-500 text-white hover:bg-primary-600 transition-all text-sm font-bold shadow-sm\"\r\n                                        >\r\n                                            <Plus className=\"w-4 h-4\" />\r\n                                            Upload\r\n                                        </Link>\r\n                                    )}\r\n                                    <Link\r\n                                        to=\"/profile\"\r\n                                        className=\"flex items-center gap-2 px-4 py-2 rounded-full border border-gray-200 hover:border-primary-500 bg-primary-50 text-primary-600 transition-all text-sm font-bold shadow-sm\"\r\n                                    >\r\n                                        <User className=\"w-4 h-4\" />\r\n                                        {user.name.split(' ')[0]}\r\n                                    </Link>\r\n                                </div>\r\n                            ) : (\r\n                                <Link\r\n                                    to=\"/login\"\r\n                                    className=\"flex items-center gap-2 px-4 py-2 rounded-full border border-gray-200 hover:border-primary-500 hover:text-primary-500 transition-all text-sm font-medium\"\r\n                                >\r\n                                    <User className=\"w-4 h-4\" />\r\n                                    Sign In\r\n                                </Link>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Mobile Menu Button */}\r\n                    <div className=\"lg:hidden flex items-center gap-2\">\r\n                        {user && (\r\n                            <Link\r\n                                to=\"/notifications\"\r\n                                className=\"relative p-2 text-gray-600 hover:text-primary-500 transition-colors\"\r\n                            >\r\n                                <Bell className=\"w-6 h-6 md:w-5 md:h-5\" />\r\n                                {unreadCount > 0 && (\r\n                                    <span className=\"absolute top-1 right-1 w-2.5 h-2.5 bg-rose-500 rounded-full border-2 border-white\"></span>\r\n                                )}\r\n                            </Link>\r\n                        )}\r\n                        <button\r\n                            onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\r\n                            className=\"p-2 text-gray-600 hover:text-primary-500 transition-colors\"\r\n                        >\r\n                            {isMobileMenuOpen ? <X className=\"w-7 h-7 md:w-6 md:h-6\" /> : <Menu className=\"w-7 h-7 md:w-6 md:h-6\" />}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Mobile Menu Content */}\r\n            <div\r\n                className={`lg:hidden absolute top-full left-0 w-full bg-white/95 backdrop-blur-3xl border-t border-white/60 transition-all duration-300 overflow-hidden shadow-2xl rounded-b-[32px] ${isMobileMenuOpen ? 'max-h-[calc(100svh-5rem)] opacity-100' : 'max-h-0 opacity-0'\r\n                    }`}\r\n            >\r\n                <div className=\"px-4 py-4 space-y-3 max-h-[calc(100svh-5rem)] overflow-y-auto custom-scrollbar\">\r\n                    {navLinks.map((link) => (\r\n                        <Link\r\n                            key={link.name}\r\n                            to={link.path}\r\n                            className={`block px-4 py-3 rounded-xl text-base font-bold transition-colors ${location.pathname === link.path\r\n                                ? 'bg-primary-50 text-primary-600'\r\n                                : 'text-gray-700 hover:text-primary-600 hover:bg-gray-50'\r\n                                }`}\r\n                            onClick={() => setIsMobileMenuOpen(false)}\r\n                        >\r\n                            <div className=\"flex items-center justify-between\">\r\n                                {link.name}\r\n                                {link.name === 'Chilli AI' && (\r\n                                    <span className=\"px-2 py-0.5 text-[10px] uppercase tracking-wider font-extrabold bg-gradient-to-tr from-orange-400 to-red-500 text-white rounded-full flex items-center gap-1 shadow-sm\">\r\n                                        <span className=\"w-1.5 h-1.5 rounded-full bg-white animate-pulse\"></span>\r\n                                        NEW\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                        </Link>\r\n                    ))}\r\n                    <div className=\"pt-4 border-t border-gray-100 flex flex-col gap-3\">\r\n                        {user ? (\r\n                            <div className=\"flex flex-col gap-3 w-full\">\r\n                                <Link\r\n                                    to=\"/feed\"\r\n                                    className=\"flex items-center justify-center gap-2 w-full px-4 py-2 rounded-full border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors\"\r\n                                    onClick={() => setIsMobileMenuOpen(false)}\r\n                                >\r\n                                    <Activity className=\"w-4 h-4\" />\r\n                                    My Feed\r\n                                </Link>\r\n                                {!user?.isAdmin && (\r\n                                    <Link\r\n                                        to=\"/upload\"\r\n                                        className=\"flex items-center justify-center gap-2 w-full px-4 py-2 rounded-full border border-primary-500 text-primary-600 hover:bg-primary-50 transition-colors\"\r\n                                        onClick={() => setIsMobileMenuOpen(false)}\r\n                                    >\r\n                                        <Plus className=\"w-4 h-4\" />\r\n                                        Upload Recipe\r\n                                    </Link>\r\n                                )}\r\n                                <Link\r\n                                    to=\"/profile\"\r\n                                    className=\"flex items-center justify-center gap-2 w-full px-4 py-2 rounded-full bg-primary-500 text-white hover:bg-primary-600 transition-colors\"\r\n                                    onClick={() => setIsMobileMenuOpen(false)}\r\n                                >\r\n                                    <User className=\"w-4 h-4\" />\r\n                                    View Profile\r\n                                </Link>\r\n                            </div>\r\n                        ) : (\r\n                            <Link\r\n                                to=\"/login\"\r\n                                className=\"flex items-center justify-center gap-2 w-full px-4 py-2 rounded-full bg-primary-500 text-white hover:bg-primary-600 transition-colors\"\r\n                                onClick={() => setIsMobileMenuOpen(false)}\r\n                            >\r\n                                Sign In\r\n                            </Link>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default Navbar;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\data\\mockRecipes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\Admin.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\Categories.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\ChilliAI.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":41,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":29},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":99,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":167,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":167,"endColumn":23}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { ChefHat, Send, Menu, Plus, MessageSquare, Trash2, Home, Utensils, Image as ImageIcon } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst ChilliAI = () => {\r\n    const navigate = useNavigate();\r\n    const initialMessage = {\r\n        id: 1,\r\n        type: 'ai',\r\n        text: \"Hi there! I'm Chilli, your personal AI Chef. Tell me what ingredients you have, or ask me for recipe recommendations!\",\r\n        timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n    };\r\n\r\n    const [messages, setMessages] = useState([initialMessage]);\r\n    const [input, setInput] = useState('');\r\n    const [isTyping, setIsTyping] = useState(false);\r\n    const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n    const [history, setHistory] = useState([]);\r\n    const [activeChatId, setActiveChatId] = useState(null);\r\n    const messagesEndRef = useRef(null);\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    };\r\n\r\n    useEffect(() => {\r\n        scrollToBottom();\r\n    }, [messages, isTyping]);\r\n\r\n    useEffect(() => {\r\n        const fetchHistory = async () => {\r\n            const storedUser = localStorage.getItem('chilli_user');\r\n            if (storedUser) {\r\n                const userId = JSON.parse(storedUser).id;\r\n                try {\r\n                    const res = await fetch(`/api/ai/history/${userId}`);\r\n                    if (res.ok) {\r\n                        const data = await res.json();\r\n                        setHistory(data.reverse());\r\n                    }\r\n                } catch (err) {\r\n                    console.error(\"Error fetching history\");\r\n                }\r\n            }\r\n        };\r\n        fetchHistory();\r\n    }, []);\r\n\r\n    const handleNewChat = () => {\r\n        setMessages([initialMessage]);\r\n        setActiveChatId(null);\r\n        if (window.innerWidth < 768) {\r\n            setIsSidebarOpen(false);\r\n        }\r\n    };\r\n\r\n    const loadChat = (chatItem) => {\r\n        setActiveChatId(chatItem._id);\r\n        if (chatItem.messages && chatItem.messages.length > 0) {\r\n            setMessages(chatItem.messages.map((m, i) => ({\r\n                id: m._id || Date.now() + i,\r\n                type: m.type,\r\n                text: m.text,\r\n                timestamp: m.timestamp || new Date(chatItem.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n            })));\r\n        } else {\r\n            setMessages([\r\n                {\r\n                    id: Date.now(),\r\n                    type: 'user',\r\n                    text: chatItem.userInput,\r\n                    timestamp: new Date(chatItem.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n                },\r\n                {\r\n                    id: Date.now() + 1,\r\n                    type: 'ai',\r\n                    text: chatItem.aiResponse,\r\n                    timestamp: new Date(chatItem.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n                }\r\n            ]);\r\n        }\r\n        if (window.innerWidth < 768) {\r\n            setIsSidebarOpen(false);\r\n        }\r\n    };\r\n\r\n    const deleteChat = async (e, chatId) => {\r\n        e.stopPropagation();\r\n        try {\r\n            const res = await fetch(`/api/ai/history/${chatId}`, {\r\n                method: 'DELETE'\r\n            });\r\n            if (res.ok) {\r\n                setHistory(prev => prev.filter(c => c._id !== chatId));\r\n                if (activeChatId === chatId) {\r\n                    handleNewChat();\r\n                }\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Error deleting chat\");\r\n        }\r\n    };\r\n\r\n    const handleSend = async (e) => {\r\n        e.preventDefault();\r\n        if (!input.trim()) return;\r\n\r\n        const userMsg = {\r\n            id: Date.now(),\r\n            type: 'user',\r\n            text: input,\r\n            timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMsg]);\r\n        setInput('');\r\n        setIsTyping(true);\r\n\r\n        const storedUser = localStorage.getItem('chilli_user');\r\n        const userId = storedUser ? JSON.parse(storedUser).id : null;\r\n\r\n        try {\r\n            const res = await fetch('/api/ai/chat', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ message: userMsg.text, userId, chatId: activeChatId })\r\n            });\r\n\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                const aiMsg = {\r\n                    id: Date.now() + 1,\r\n                    type: 'ai',\r\n                    text: data.text,\r\n                    timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n                };\r\n                setMessages(prev => [...prev, aiMsg]);\r\n\r\n                if (data.chatId) {\r\n                    setActiveChatId(data.chatId);\r\n                    setHistory(prev => {\r\n                        const existingChat = prev.find(c => c._id === data.chatId);\r\n                        if (existingChat) {\r\n                            return prev.map(c => c._id === data.chatId ? {\r\n                                ...c,\r\n                                messages: [...(c.messages || []), { type: 'user', text: userMsg.text }, { type: 'ai', text: data.text }]\r\n                            } : c);\r\n                        } else {\r\n                            return [{\r\n                                _id: data.chatId,\r\n                                title: userMsg.text.substring(0, 30) + (userMsg.text.length > 30 ? '...' : ''),\r\n                                messages: [{ type: 'user', text: userMsg.text }, { type: 'ai', text: data.text }],\r\n                                createdAt: new Date().toISOString()\r\n                            }, ...prev];\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                const errData = await res.json();\r\n                setMessages(prev => [...prev, {\r\n                    id: Date.now() + 1,\r\n                    type: 'ai',\r\n                    text: `Oops! My kitchen had a tiny fire: ${errData.message || 'Could not connect.'}`,\r\n                    timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n                }]);\r\n            }\r\n        } catch (error) {\r\n            setMessages(prev => [...prev, {\r\n                id: Date.now() + 1,\r\n                type: 'ai',\r\n                text: \"I'm having trouble connecting to my kitchen server right now. Let me grab my whisk and try later.\",\r\n                timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n            }]);\r\n        } finally {\r\n            setIsTyping(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-40 bg-gradient-to-br from-gray-50 via-primary-50 to-orange-50 pt-[72px] sm:pt-20 pb-0 sm:pb-4 flex flex-col font-sans overflow-hidden\">\r\n\r\n            {/* Background elements */}\r\n            <div className=\"absolute top-0 right-0 w-96 h-96 bg-rose-400/20 rounded-full blur-3xl -z-10 animate-blob pointer-events-none\"></div>\r\n            <div className=\"absolute bottom-40 left-10 w-80 h-80 bg-orange-400/20 rounded-full blur-3xl -z-10 animate-blob animation-delay-2000 pointer-events-none\"></div>\r\n\r\n            <main className=\"flex-1 w-full max-w-7xl mx-auto px-0 sm:px-4 lg:px-8 flex gap-4 xl:gap-6 relative z-10 overflow-hidden\">\r\n\r\n                {/* Glass Sidebar */}\r\n                <div\r\n                    className={`absolute md:relative left-0 top-0 h-full transition-all duration-500 ease-[cubic-bezier(0.25,1,0.5,1)] z-40 \r\n                        ${isSidebarOpen ? 'w-[280px] translate-x-0' : 'w-[280px] -translate-x-[110%] md:w-0 md:translate-x-0'} \r\n                        md:${isSidebarOpen ? 'w-[280px] opacity-100' : 'w-0 opacity-0 overflow-hidden'}`}\r\n                >\r\n                    <div className=\"glass-panel w-full h-full rounded-[30px] flex flex-col overflow-hidden shadow-xl border border-white/60\">\r\n                        {/* Sidebar Header */}\r\n                        <div className=\"p-5 border-b border-gray-100/50 bg-white/40\">\r\n                            <button\r\n                                onClick={handleNewChat}\r\n                                className=\"w-full liquid-button shadow-md flex items-center justify-center gap-2 py-3 rounded-2xl text-sm tracking-wide\"\r\n                            >\r\n                                <Plus className=\"w-4 h-4\" /> Start New Recipe\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Sidebar History */}\r\n                        <div className=\"flex-1 overflow-y-auto px-3 py-4 custom-scrollbar\">\r\n                            <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest pl-2 mb-3\">Kitchen History</h3>\r\n                            {history.length === 0 ? (\r\n                                <div className=\"text-center py-8\">\r\n                                    <Utensils className=\"w-8 h-8 text-gray-300 mx-auto mb-2\" />\r\n                                    <p className=\"text-sm text-gray-400 font-medium\">No previous cooks.</p>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"space-y-1.5\">\r\n                                    {history.map((item) => (\r\n                                        <div\r\n                                            key={item._id}\r\n                                            className={`group w-full flex items-center justify-between p-3 rounded-2xl transition-all cursor-pointer backdrop-blur-sm \r\n                                                ${activeChatId === item._id\r\n                                                    ? 'bg-gradient-to-r from-orange-50 to-rose-50 border border-orange-200 shadow-sm'\r\n                                                    : 'hover:bg-white/60 border border-transparent'}`}\r\n                                            onClick={() => loadChat(item)}\r\n                                        >\r\n                                            <div className=\"flex items-center gap-3 overflow-hidden\">\r\n                                                <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 transition-colors\r\n                                                    ${activeChatId === item._id ? 'bg-orange-100' : 'bg-gray-100 group-hover:bg-white'}`}>\r\n                                                    <MessageSquare className={`w-4 h-4 ${activeChatId === item._id ? 'text-orange-500' : 'text-gray-400'}`} />\r\n                                                </div>\r\n                                                <p className={`text-sm truncate font-medium ${activeChatId === item._id ? 'text-gray-900' : 'text-gray-600'}`}>\r\n                                                    {item.title || item.userInput}\r\n                                                </p>\r\n                                            </div>\r\n                                            <button\r\n                                                onClick={(e) => deleteChat(e, item._id)}\r\n                                                className=\"opacity-0 group-hover:opacity-100 p-1.5 hover:bg-rose-100 hover:text-rose-500 text-gray-400 rounded-xl transition-all\"\r\n                                            >\r\n                                                <Trash2 className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Overlay for mobile sidebar */}\r\n                {isSidebarOpen && (\r\n                    <div\r\n                        className=\"fixed inset-0 bg-gray-900/20 backdrop-blur-sm z-30 md:hidden\"\r\n                        onClick={() => setIsSidebarOpen(false)}\r\n                    />\r\n                )}\r\n\r\n                {/* Main Chat Container */}\r\n                <div className=\"flex-1 h-full flex flex-col glass-panel rounded-none sm:rounded-[30px] md:rounded-[40px] shadow-2xl border-x-0 border-b-0 sm:border border-white/60 overflow-hidden relative backdrop-blur-3xl bg-white/50\">\r\n\r\n                    {/* Header */}\r\n                    <header className=\"flex items-center justify-between p-4 sm:px-8 sm:py-5 bg-white/40 border-b border-gray-100/50 backdrop-blur-md z-20\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <button\r\n                                onClick={() => setIsSidebarOpen(!isSidebarOpen)}\r\n                                className=\"p-2 sm:p-2.5 bg-white shadow-sm hover:shadow text-gray-600 hover:text-orange-500 rounded-full transition-all\"\r\n                            >\r\n                                <Menu className=\"w-5 h-5 sm:w-6 sm:h-6\" />\r\n                            </button>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"p-2 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl shadow-lg shadow-orange-500/30\">\r\n                                    <ChefHat className=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h1 className=\"text-xl sm:text-2xl font-extrabold text-gray-900 tracking-tight leading-tight\">Chilli AI</h1>\r\n                                    <p className=\"text-xs text-orange-500 font-medium tracking-wide uppercase\">Your Kitchen Companion</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={() => navigate('/')}\r\n                            className=\"p-2.5 sm:px-4 sm:py-2 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-full transition-colors flex items-center gap-2 text-sm font-semibold\"\r\n                        >\r\n                            <span className=\"hidden sm:block\">Back Home</span>\r\n                            <Home className=\"w-5 h-5\" />\r\n                        </button>\r\n                    </header>\r\n\r\n                    {/* Chat Area */}\r\n                    <div className=\"flex-1 overflow-y-auto scroll-smooth custom-scrollbar relative px-3 sm:px-6 lg:px-10 py-4 sm:py-6\">\r\n                        {messages.length === 1 && activeChatId === null && (\r\n                            <div className=\"h-full flex flex-col items-center justify-center text-center animate-fade-in opacity-80 pt-10 pb-20\">\r\n                                <div className=\"w-24 h-24 mb-6 rounded-3xl bg-gradient-to-br from-orange-100 to-red-50 flex items-center justify-center shadow-inner transform rotate-3\">\r\n                                    <ChefHat className=\"w-12 h-12 text-orange-500 drop-shadow-sm\" />\r\n                                </div>\r\n                                <h2 className=\"text-3xl font-extrabold text-gray-900 mb-3\">Cook something incredible.</h2>\r\n                                <p className=\"text-lg text-gray-500 max-w-md mx-auto font-medium\">\r\n                                    Tell Chilli what ingredients you have in your kitchen, and magic will happen.\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"space-y-6 sm:space-y-8 max-w-4xl mx-auto\">\r\n                            {messages.map((msg, idx) => {\r\n                                // Don't show the initial hidden greeting if we're generating custom views\r\n                                if (idx === 0 && activeChatId === null && messages.length === 1) return null;\r\n\r\n                                return (\r\n                                    <div\r\n                                        key={msg.id}\r\n                                        className={`flex gap-3 sm:gap-5 ${msg.type === 'user' ? 'justify-end' : 'justify-start'} animate-slide-up`}\r\n                                    >\r\n                                        {msg.type === 'ai' && (\r\n                                            <div className=\"w-10 h-10 sm:w-12 sm:h-12 rounded-2xl bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center flex-shrink-0 shadow-lg shadow-orange-500/20 z-10\">\r\n                                                <ChefHat className=\"w-6 h-6 text-white\" />\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        <div className={`flex flex-col max-w-[85%] sm:max-w-[70%] ${msg.type === 'user' ? 'items-end' : 'items-start'}`}>\r\n                                            {msg.type === 'user' ? (\r\n                                                <div className=\"px-4 sm:px-6 py-3 sm:py-4 rounded-[24px] rounded-tr-[8px] bg-gradient-to-r from-gray-900 to-gray-800 text-white shadow-xl shadow-gray-900/10\">\r\n                                                    <p className=\"leading-relaxed text-[15px] sm:text-[16px] font-medium break-words\">{msg.text}</p>\r\n                                                </div>\r\n                                            ) : (\r\n                                                <div className=\"px-4 sm:px-7 py-3 sm:py-6 rounded-[28px] rounded-tl-[10px] glass-panel bg-white/80 text-gray-800 shadow-xl border border-white/80 w-full\">\r\n                                                    <div className=\"prose prose-orange max-w-none text-[15px] sm:text-[16px] leading-relaxed font-medium\">\r\n                                                        <div dangerouslySetInnerHTML={{ __html: msg.text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"text-gray-900 font-bold\">$1</strong>').replace(/\\n/g, '<br />') }} />\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n                                            <span className=\"text-[11px] text-gray-400 font-semibold uppercase tracking-wider mt-2 px-2\">\r\n                                                {msg.timestamp}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n\r\n                            {isTyping && (\r\n                                <div className=\"flex gap-4 sm:gap-5 items-end animate-fade-in pl-2\">\r\n                                    <div className=\"w-10 h-10 sm:w-12 sm:h-12 rounded-2xl bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center flex-shrink-0 shadow-lg shadow-orange-500/20\">\r\n                                        <ChefHat className=\"w-6 h-6 text-white animate-pulse\" />\r\n                                    </div>\r\n                                    <div className=\"px-6 py-5 rounded-[32px] rounded-tl-[10px] glass-panel bg-white/80 flex items-center gap-2 shadow-xl border border-white/80\">\r\n                                        <div className=\"w-2.5 h-2.5 rounded-full bg-orange-400 animate-bounce\"></div>\r\n                                        <div className=\"w-2.5 h-2.5 rounded-full bg-red-400 animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\r\n                                        <div className=\"w-2.5 h-2.5 rounded-full bg-orange-500 animate-bounce\" style={{ animationDelay: '0.4s' }}></div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                            <div ref={messagesEndRef} className=\"h-4\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Input Area */}\r\n                    <div className=\"w-full shrink-0 pt-4 pb-4 sm:pb-6 z-20 px-2 sm:px-6 lg:px-10 sm:bg-gradient-to-t sm:from-white/90 sm:via-white/80 sm:to-transparent backdrop-blur-md sm:backdrop-blur-[2px] border-t border-white/40 sm:border-t-0\">\r\n                        <div className=\"max-w-4xl mx-auto w-full relative group\">\r\n                            <div className=\"absolute -inset-1 bg-gradient-to-r from-orange-400 via-red-500 to-orange-400 rounded-[36px] blur opacity-25 group-focus-within:opacity-50 transition duration-500\"></div>\r\n                            <form\r\n                                onSubmit={handleSend}\r\n                                className=\"relative flex items-end bg-white/90 backdrop-blur-xl rounded-[32px] p-2 shadow-2xl border border-white focus-within:bg-white transition-all duration-300\"\r\n                            >\r\n                                <button type=\"button\" className=\"p-3.5 sm:p-4 text-gray-400 hover:text-orange-500 transition-colors rounded-full hover:bg-orange-50 mb-0.5\" title=\"Upload an Image\">\r\n                                    <ImageIcon className=\"w-6 h-6\" />\r\n                                </button>\r\n\r\n                                <textarea\r\n                                    value={input}\r\n                                    onChange={(e) => setInput(e.target.value)}\r\n                                    placeholder=\"Type your ingredients or ask for a recipe...\"\r\n                                    rows={1}\r\n                                    className=\"flex-1 bg-transparent border-none py-3 sm:py-4 px-2 focus:outline-none focus:ring-0 text-gray-900 text-[15px] sm:text-[17px] font-medium placeholder-gray-400 resize-none min-h-[48px] sm:min-h-[56px] max-h-[120px] sm:max-h-[160px] overflow-y-auto custom-scrollbar leading-relaxed\"\r\n                                    onKeyDown={(e) => {\r\n                                        if (e.key === 'Enter' && !e.shiftKey) {\r\n                                            e.preventDefault();\r\n                                            handleSend(e);\r\n                                        }\r\n                                    }}\r\n                                />\r\n\r\n                                <div className=\"mb-0.5 mr-1\">\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        disabled={!input.trim() || isTyping}\r\n                                        className={`p-3.5 sm:p-4 rounded-full transition-all duration-300 transform shadow-md\r\n                                            ${!input.trim() || isTyping\r\n                                                ? 'bg-gray-100 text-gray-300 cursor-not-allowed shadow-none'\r\n                                                : 'bg-gradient-to-r from-orange-500 to-red-500 text-white hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0'}`}\r\n                                    >\r\n                                        <Send className={`w-5 h-5 sm:w-6 sm:h-6 ${input.trim() ? 'ml-0.5' : ''}`} />\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                            <div className=\"text-center mt-3 hidden sm:block\">\r\n                                <p className=\"text-[12px] text-gray-500 font-semibold tracking-wide drop-shadow-sm\">Chilli loves to experiment, but please verify recipes.</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChilliAI;\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\CookProfile.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loggedInUser'. Either include it or remove the dependency array.","line":56,"column":8,"nodeType":"ArrayExpression","endLine":56,"endColumn":40,"suggestions":[{"desc":"Update the dependencies array to be: [id, navigate, loggedInUser.id, loggedInUser]","fix":{"range":[2085,2117],"text":"[id, navigate, loggedInUser.id, loggedInUser]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":94,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { User, UserPlus, UserCheck, Utensils, BadgeCheck } from 'lucide-react';\r\n\r\nconst CookProfile = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const [profileUser, setProfileUser] = useState(null);\r\n    const [recipes, setRecipes] = useState([]);\r\n    const [isFollowing, setIsFollowing] = useState(false);\r\n    const [followModal, setFollowModal] = useState(null); // 'followers' | 'following' | null\r\n    const [allUsers, setAllUsers] = useState([]);\r\n\r\n    const loggedInUserStr = localStorage.getItem('chilli_user');\r\n    const loggedInUser = loggedInUserStr ? JSON.parse(loggedInUserStr) : null;\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n\r\n        const fetchData = async () => {\r\n            let isAdmin = false;\r\n            try {\r\n                const res = await fetch(`/api/users/${id}`);\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    setProfileUser(data);\r\n                    isAdmin = data.isAdmin;\r\n\r\n                    if (loggedInUser && data.followers.some(f => (f._id || f) === loggedInUser.id)) {\r\n                        setIsFollowing(true);\r\n                    }\r\n                } else {\r\n                    navigate('/'); // Go back if user not found\r\n                    return;\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const res = await fetch('/api/recipes');\r\n                if (res.ok) {\r\n                    const allRecipes = await res.json();\r\n                    setRecipes(allRecipes.filter(r =>\r\n                        (r.author && (r.author._id === id || r.author === id)) ||\r\n                        (isAdmin && !r.author)\r\n                    ));\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, [id, navigate, loggedInUser?.id]);\r\n\r\n    const handleFollowToggle = async () => {\r\n        if (!loggedInUser) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        const endpoint = isFollowing ? 'unfollow' : 'follow';\r\n        try {\r\n            const res = await fetch(`/api/users/${id}/${endpoint}`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ currentUserId: loggedInUser.id })\r\n            });\r\n\r\n            if (res.ok) {\r\n                setIsFollowing(!isFollowing);\r\n                // Optionally update the count locally instead of full refetch\r\n                setProfileUser(prev => ({\r\n                    ...prev,\r\n                    followers: isFollowing\r\n                        ? prev.followers.filter(f => (f._id || f) !== loggedInUser.id)\r\n                        : [...prev.followers, { _id: loggedInUser.id }]\r\n                }));\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    const handleOpenFollowModal = async (type) => {\r\n        setFollowModal(type);\r\n        try {\r\n            const res = await fetch('/api/users');\r\n            if (res.ok) {\r\n                setAllUsers(await res.json());\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to load users for modal');\r\n        }\r\n    };\r\n\r\n    if (!profileUser) return <div className=\"min-h-screen pt-32 pb-20 text-center flex items-center justify-center font-bold text-gray-400\">Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 pt-32 pb-20\">\r\n            <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                {/* Header */}\r\n                <div className=\"bg-white rounded-3xl p-8 sm:p-10 shadow-xl shadow-primary-500/5 mb-8 relative overflow-hidden animate-slide-up\">\r\n                    <div className=\"absolute top-0 left-0 w-full h-32 bg-gradient-to-r from-orange-400 to-rose-400\"></div>\r\n\r\n                    <div className=\"relative z-10 flex flex-col sm:flex-row items-center sm:items-end gap-6 pt-16\">\r\n                        <div className=\"w-32 h-32 bg-white rounded-full p-1.5 shadow-xl shrink-0\">\r\n                            <img\r\n                                src={profileUser.profilePhoto || \"https://api.dicebear.com/7.x/adventurer/svg?seed=Felix\"}\r\n                                alt={profileUser.name}\r\n                                className=\"w-full h-full object-cover rounded-full border-2 border-orange-100\"\r\n                                onError={(e) => { e.target.src = \"https://api.dicebear.com/7.x/adventurer/svg?seed=Felix\"; }}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 text-center sm:text-left\">\r\n                            <h1 className=\"text-3xl sm:text-4xl font-extrabold text-gray-900 tracking-tight flex items-center gap-2 flex-wrap justify-center sm:justify-start\">\r\n                                {profileUser.name}\r\n                                {(profileUser.isVerified || profileUser.isAdmin) && <BadgeCheck className=\"w-8 h-8 text-primary-500 shrink-0\" />}\r\n                            </h1>\r\n                            <p className=\"text-gray-600 mt-2 italic\">\"{profileUser.bio || 'Home cook'}\"</p>\r\n\r\n                            <div className=\"flex items-center justify-center sm:justify-start gap-6 mt-4\">\r\n                                <div onClick={() => handleOpenFollowModal('followers')} className=\"text-center cursor-pointer hover:opacity-70 transition-opacity group\">\r\n                                    <span className=\"block font-bold text-gray-900 text-xl group-hover:text-primary-600 transition-colors\">{profileUser.followers?.length || 0}</span>\r\n                                    <span className=\"text-xs text-gray-500 uppercase tracking-wider font-semibold\">Followers</span>\r\n                                </div>\r\n                                <div onClick={() => handleOpenFollowModal('following')} className=\"text-center cursor-pointer hover:opacity-70 transition-opacity group\">\r\n                                    <span className=\"block font-bold text-gray-900 text-xl group-hover:text-primary-600 transition-colors\">{profileUser.following?.length || 0}</span>\r\n                                    <span className=\"text-xs text-gray-500 uppercase tracking-wider font-semibold\">Following</span>\r\n                                </div>\r\n                                <div className=\"text-center\">\r\n                                    <span className=\"block font-bold text-gray-900 text-xl\">{recipes.length}</span>\r\n                                    <span className=\"text-xs text-gray-500 uppercase tracking-wider font-semibold\">Recipes</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {loggedInUser?.id !== profileUser._id && (\r\n                            <div className=\"shrink-0 mt-6 sm:mt-0\">\r\n                                <button\r\n                                    onClick={handleFollowToggle}\r\n                                    className={`flex items-center gap-2 px-8 py-3 rounded-full font-bold transition-all shadow-lg ${isFollowing\r\n                                        ? 'bg-gray-100 text-gray-700 hover:bg-gray-200 shadow-gray-200/50'\r\n                                        : 'bg-primary-500 text-white hover:bg-primary-600 shadow-primary-500/30'\r\n                                        }`}\r\n                                >\r\n                                    {isFollowing ? (\r\n                                        <><UserCheck className=\"w-5 h-5\" /> Following</>\r\n                                    ) : (\r\n                                        <><UserPlus className=\"w-5 h-5\" /> Follow</>\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Recipes Grid */}\r\n                <div className=\"animate-slide-up\" style={{ animationDelay: '0.1s' }}>\r\n                    <h3 className=\"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n                        <Utensils className=\"w-6 h-6 text-primary-500\" />\r\n                        Recipes by {profileUser.name.split(' ')[0]}\r\n                    </h3>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                        {recipes.map(recipe => (\r\n                            <div key={recipe.id} onClick={() => navigate(`/recipe/${recipe.id}`)} className=\"bg-white rounded-2xl overflow-hidden shadow-md hover:shadow-xl transition-all cursor-pointer group\">\r\n                                <div className=\"relative h-48 overflow-hidden\">\r\n                                    <img src={recipe.image} alt={recipe.title} className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\" />\r\n                                </div>\r\n                                <div className=\"p-5\">\r\n                                    <h4 className=\"font-bold text-gray-900 line-clamp-1\">{recipe.title}</h4>\r\n                                    <p className=\"text-sm text-gray-500 mt-2 flex items-center gap-2\">\r\n                                        <span className=\"px-2 py-1 bg-gray-100 rounded-lg\">{recipe.difficulty}</span>\r\n                                        <span className=\"px-2 py-1 bg-gray-100 rounded-lg\">{recipe.time}</span>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                    {recipes.length === 0 && (\r\n                        <div className=\"text-center py-12 bg-white rounded-3xl border border-gray-100 border-dashed\">\r\n                            <p className=\"text-gray-500 mb-2\">This cook hasn't uploaded any public recipes yet.</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Followers / Following Modal */}\r\n            {followModal && (\r\n                <div className=\"fixed inset-0 z-[200] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in\" onClick={() => setFollowModal(null)}>\r\n                    <div className=\"bg-white rounded-[32px] w-full max-w-sm overflow-hidden shadow-2xl transform scale-100 animate-slide-up\" onClick={e => e.stopPropagation()}>\r\n                        <div className=\"p-4 border-b border-gray-100 flex items-center justify-between bg-white relative\">\r\n                            <h3 className=\"font-extrabold text-lg text-gray-900 capitalize mx-auto\">{followModal}</h3>\r\n                            <button onClick={() => setFollowModal(null)} className=\"absolute right-4 p-2 bg-gray-100 hover:bg-gray-200 rounded-full text-gray-600 transition-colors font-bold text-[10px] uppercase tracking-wider\">Close</button>\r\n                        </div>\r\n                        <div className=\"max-h-[60vh] overflow-y-auto p-2 custom-scrollbar bg-gray-50/30\">\r\n                            {(() => {\r\n                                const listIds = followModal === 'followers' ? profileUser.followers : profileUser.following;\r\n                                if (!listIds || listIds.length === 0) return <div className=\"p-10 text-center text-gray-500 text-sm font-medium\">No {followModal} found.</div>;\r\n\r\n                                const listUsers = allUsers.filter(u => listIds.some(id => (id._id || id) === u._id));\r\n\r\n                                if (listUsers.length === 0) return <div className=\"p-10 flex justify-center\"><div className=\"w-6 h-6 border-2 border-primary-500 border-t-transparent rounded-full animate-spin\"></div></div>;\r\n\r\n                                return listUsers.map(u => (\r\n                                    <div key={u._id} onClick={() => { setFollowModal(null); navigate(`/user/${u._id}`); }} className=\"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-2xl transition-colors group cursor-pointer\">\r\n                                        <img src={u.profilePhoto || \"https://api.dicebear.com/7.x/adventurer/svg?seed=Felix\"} className=\"w-12 h-12 rounded-full object-cover border border-gray-200 group-hover:scale-105 transition-transform\" alt={u.name} />\r\n                                        <div className=\"flex-1 overflow-hidden\">\r\n                                            <h4 className=\"font-bold text-gray-900 text-sm truncate flex items-center gap-1\">{u.name}{(u.isVerified || u.isAdmin) && <BadgeCheck className=\"w-3.5 h-3.5 text-primary-500 shrink-0\" />}</h4>\r\n                                            <p className=\"text-xs text-gray-500 truncate font-medium\">{u.followers?.length || 0} followers</p>\r\n                                        </div>\r\n                                    </div>\r\n                                ));\r\n                            })()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CookProfile;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\Favourites.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  10 |         const stored = localStorage.getItem('chilli_favourites');\n  11 |         if (stored) {\n> 12 |             setFavouriteRecipes(JSON.parse(stored));\n     |             ^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  13 |         }\n  14 |     }, []);\n  15 |","line":12,"column":13,"nodeType":null,"endLine":12,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Heart, Clock, Flame, Trash2, ArrowRight } from 'lucide-react';\r\n\r\nconst Favourites = () => {\r\n    const [favouriteRecipes, setFavouriteRecipes] = useState([]);\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n        const stored = localStorage.getItem('chilli_favourites');\r\n        if (stored) {\r\n            setFavouriteRecipes(JSON.parse(stored));\r\n        }\r\n    }, []);\r\n\r\n    const removeFavourite = (id) => {\r\n        const newFavs = favouriteRecipes.filter(r => r.id !== id);\r\n        setFavouriteRecipes(newFavs);\r\n        localStorage.setItem('chilli_favourites', JSON.stringify(newFavs));\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen pt-24 pb-12 relative z-0\">\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n\r\n                {/* Header */}\r\n                <div className=\"mb-12 animate-slide-up\">\r\n                    <h1 className=\"text-4xl font-extrabold text-gray-900 mb-4 flex items-center gap-3\">\r\n                        My <span className=\"text-gradient\">Favourites</span>\r\n                        <Heart className=\"w-8 h-8 text-rose-500 fill-rose-500\" />\r\n                    </h1>\r\n                    <p className=\"text-gray-600 text-lg\">\r\n                        Your personal collection of saved recipes, ready to cook anytime.\r\n                    </p>\r\n                </div>\r\n\r\n                {favouriteRecipes.length > 0 ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\r\n                        {favouriteRecipes.map((recipe, index) => (\r\n                            <div\r\n                                key={recipe.id}\r\n                                className=\"group liquid-card pb-2 relative animate-slide-up\"\r\n                                style={{ animationDelay: `${0.1 * index}s` }}\r\n                            >\r\n                                {/* Remove Button */}\r\n                                <button\r\n                                    onClick={(e) => {\r\n                                        e.preventDefault();\r\n                                        removeFavourite(recipe.id);\r\n                                    }}\r\n                                    className=\"absolute top-4 right-4 z-10 p-2.5 bg-white/90 backdrop-blur-md rounded-full text-rose-500 hover:text-white hover:bg-rose-500 transition-colors shadow-sm opacity-0 group-hover:opacity-100 duration-300\"\r\n                                >\r\n                                    <Trash2 className=\"w-4 h-4\" />\r\n                                </button>\r\n\r\n                                <Link to={`/recipe/${recipe.id}`} className=\"block overflow-hidden rounded-t-3xl\">\r\n                                    {/* Image Container */}\r\n                                    <div className=\"relative h-48 overflow-hidden\">\r\n                                        <img\r\n                                            src={recipe.image}\r\n                                            alt={recipe.title}\r\n                                            className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 transform-gpu\"\r\n                                        />\r\n                                        <div className=\"absolute inset-0 bg-gradient-to-t from-gray-900/60 to-transparent\"></div>\r\n                                        <div className=\"absolute top-4 left-4\">\r\n                                            <span className=\"px-2.5 py-1 bg-white/20 backdrop-blur-md text-white text-xs font-semibold rounded-lg uppercase tracking-wide\">\r\n                                                {recipe.category}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Content */}\r\n                                    <div className=\"p-5\">\r\n                                        <h3 className=\"text-lg font-bold text-gray-900 mb-3 line-clamp-1 group-hover:text-primary-600 transition-colors\">\r\n                                            {recipe.title}\r\n                                        </h3>\r\n\r\n                                        <div className=\"flex items-center justify-between text-sm text-gray-500\">\r\n                                            <div className=\"flex items-center gap-1.5 bg-gray-50 px-3 py-1.5 rounded-lg\">\r\n                                                <Clock className=\"w-4 h-4 text-primary-500\" />\r\n                                                <span className=\"font-medium\">{recipe.time}</span>\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-1.5 bg-gray-50 px-3 py-1.5 rounded-lg\">\r\n                                                <Flame className=\"w-4 h-4 text-orange-500\" />\r\n                                                <span className=\"font-medium\">{recipe.difficulty}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n                                <div className=\"px-5 pb-4 pt-2 border-t border-gray-50\">\r\n                                    <Link to={`/recipe/${recipe.id}`} className=\"w-full flex justify-center items-center gap-2 py-2.5 text-sm font-semibold text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-xl transition-colors\">\r\n                                        View Recipe <ArrowRight className=\"w-4 h-4\" />\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"text-center py-20 liquid-card animate-fade-in border-white/40\">\r\n                        <div className=\"inline-flex items-center justify-center w-20 h-20 rounded-full bg-rose-500/20 mb-6\">\r\n                            <Heart className=\"w-10 h-10 text-rose-500\" />\r\n                        </div>\r\n                        <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">No favourites yet</h3>\r\n                        <p className=\"text-gray-700 max-w-md mx-auto mb-8 font-medium\">\r\n                            Start exploring recipes and click the heart icon to save them here for quick access later.\r\n                        </p>\r\n                        <Link\r\n                            to=\"/recipes\"\r\n                            className=\"liquid-button inline-flex items-center gap-2 px-8 py-4 w-auto mx-auto\"\r\n                        >\r\n                            Explore Recipes <ArrowRight className=\"w-5 h-5\" />\r\n                        </Link>\r\n                    </div>\r\n                )}\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Favourites;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\Feed.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'user'. Either include it or remove the dependency array.","line":71,"column":8,"nodeType":"ArrayExpression","endLine":71,"endColumn":38,"suggestions":[{"desc":"Update the dependencies array to be: [feedType, navigate, user, user.id]","fix":{"range":[2833,2863],"text":"[feedType, navigate, user, user.id]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'i' is defined but never used.","line":132,"column":85,"nodeType":"Identifier","messageId":"unusedVar","endLine":132,"endColumn":86,"suggestions":[{"messageId":"removeVar","data":{"varName":"i"},"fix":{"range":[7232,7235],"text":""},"desc":"Remove unused variable 'i'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { Sparkles, TrendingUp, Users, Clock, Flame, Star, ChefHat, BadgeCheck } from 'lucide-react';\r\n\r\nconst Feed = () => {\r\n    const navigate = useNavigate();\r\n    const [recipes, setRecipes] = useState([]);\r\n    const [usersList, setUsersList] = useState([]);\r\n    const [adminUser, setAdminUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [feedType, setFeedType] = useState('following'); // 'following', 'trending', 'ai_picks'\r\n\r\n    const user = JSON.parse(localStorage.getItem('chilli_user'));\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        const fetchFeed = async () => {\r\n            setLoading(true);\r\n            try {\r\n                // Fetch all approved recipes\r\n                const res = await fetch('/api/recipes');\r\n                if (res.ok) {\r\n                    const allRecipes = await res.json();\r\n\r\n                    // Filter based on feed type\r\n                    let filtered = [];\r\n                    if (feedType === 'following') {\r\n                        // Show recipes from authors the user follows\r\n                        filtered = allRecipes.filter(r =>\r\n                            r.author &&\r\n                            user.following &&\r\n                            user.following.some(fId => fId === r.author._id || fId === r.author)\r\n                        );\r\n                    } else if (feedType === 'trending') {\r\n                        // Sort by likes or rating\r\n                        filtered = [...allRecipes].sort((a, b) => (b.likes?.length || 0) - (a.likes?.length || 0));\r\n                    } else if (feedType === 'ai_picks') {\r\n                        // Random selections as \"AI recommendations\"\r\n                        filtered = [...allRecipes].sort(() => 0.5 - Math.random()).slice(0, 10);\r\n                    }\r\n\r\n                    setRecipes(filtered);\r\n                }\r\n            } catch (err) {\r\n                console.error('Error fetching feed:', err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        const fetchUsers = async () => {\r\n            try {\r\n                const res = await fetch('/api/users');\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    setUsersList(data.filter(u => u._id !== user.id)); // exclude current user\r\n                    const admin = data.find(u => u.isAdmin);\r\n                    if (admin) setAdminUser(admin);\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        }\r\n\r\n        fetchFeed();\r\n        fetchUsers();\r\n    }, [feedType, navigate, user?.id]);\r\n\r\n    if (!user) return null;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 pt-24 pb-20\">\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n\r\n                <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-4 sm:gap-6 mb-8 sm:mb-10 mt-6 sm:mt-8 animate-slide-up\">\r\n                    <div>\r\n                        <h1 className=\"text-3xl sm:text-4xl lg:text-5xl font-extrabold text-gray-900 tracking-tight mb-2\">Your Feed</h1>\r\n                        <p className=\"text-gray-600\">Discover fresh content tailored for you.</p>\r\n                    </div>\r\n\r\n                    <div className=\"bg-white/60 backdrop-blur-md p-1.5 rounded-2xl shadow-sm border border-white flex items-center gap-1 overflow-x-auto custom-scrollbar\">\r\n                        <button\r\n                            onClick={() => setFeedType('following')}\r\n                            className={`flex items-center whitespace-nowrap gap-2 px-5 py-2.5 rounded-xl text-sm font-bold transition-all ${feedType === 'following'\r\n                                ? 'bg-primary-50 text-primary-700 shadow-sm'\r\n                                : 'text-gray-500 hover:bg-gray-50 hover:text-gray-700'\r\n                                }`}\r\n                        >\r\n                            <Users className=\"w-4 h-4\" /> Following\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setFeedType('trending')}\r\n                            className={`flex items-center whitespace-nowrap gap-2 px-5 py-2.5 rounded-xl text-sm font-bold transition-all ${feedType === 'trending'\r\n                                ? 'bg-orange-50 text-orange-700 shadow-sm'\r\n                                : 'text-gray-500 hover:bg-gray-50 hover:text-gray-700'\r\n                                }`}\r\n                        >\r\n                            <TrendingUp className=\"w-4 h-4\" /> Trending\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setFeedType('ai_picks')}\r\n                            className={`flex items-center whitespace-nowrap gap-2 px-5 py-2.5 rounded-xl text-sm font-bold transition-all ${feedType === 'ai_picks'\r\n                                ? 'bg-purple-50 text-purple-700 shadow-sm'\r\n                                : 'text-gray-500 hover:bg-gray-50 hover:text-gray-700'\r\n                                }`}\r\n                        >\r\n                            <Sparkles className=\"w-4 h-4\" /> AI Picks\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Suggested Cooks Section */}\r\n                {usersList.length > 0 && (\r\n                    <div className=\"mb-10 animate-slide-up\" style={{ animationDelay: '0.1s' }}>\r\n                        <h2 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                            <Users className=\"w-5 h-5 text-primary-500\" /> Suggested Cooks to Follow\r\n                        </h2>\r\n                        <div className=\"flex gap-4 overflow-x-auto pb-4 snap-x\">\r\n                            {/* Official Admin Profile */}\r\n                            {adminUser && adminUser._id !== user.id && (\r\n                                <Link to={`/user/${adminUser._id}`} className=\"snap-start shrink-0 w-32 bg-white rounded-2xl p-4 shadow-sm border border-gray-100 flex flex-col items-center hover:border-primary-200 transition-colors text-center group\">\r\n                                    <img src={adminUser.profilePhoto || \"https://api.dicebear.com/7.x/bottts/svg?seed=Chilli\"} alt=\"Chilli Team\" className=\"w-14 h-14 rounded-full mb-3 object-cover bg-primary-50 border-2 border-primary-100 group-hover:scale-105 transition-transform\" />\r\n                                    <h3 className=\"font-bold text-gray-900 text-sm mb-1 leading-tight flex items-center gap-1 justify-center relative\">{adminUser.name.split(' ')[0]} <BadgeCheck className=\"w-3 h-3 text-primary-500 absolute -right-4\" /></h3>\r\n                                    <p className=\"text-xs text-primary-600 font-semibold mb-2\">Official</p>\r\n                                </Link>\r\n                            )}\r\n\r\n                            {usersList.filter(u => !u.isAdmin).slice(0, 10).map((u, i) => (\r\n                                <Link to={`/user/${u._id}`} key={u._id} className=\"snap-start shrink-0 w-32 bg-white rounded-2xl p-4 shadow-sm border border-gray-100 flex flex-col items-center hover:border-primary-200 transition-colors text-center group\">\r\n                                    <img src={u.profilePhoto || \"https://api.dicebear.com/7.x/adventurer/svg?seed=Felix\"} alt={u.name} className=\"w-14 h-14 object-cover rounded-full mb-3 border-2 border-gray-100 group-hover:scale-105 transition-transform\" />\r\n                                    <h3 className=\"font-bold text-gray-900 text-sm mb-1 leading-tight flex items-center gap-1 justify-center relative\">\r\n                                        <span className=\"line-clamp-1 truncate max-w-[80px]\">{u.name.split(' ')[0]}</span>\r\n                                        {(u.isVerified || u.isAdmin) && <BadgeCheck className=\"w-3 h-3 text-primary-500 absolute -right-4\" />}\r\n                                    </h3>\r\n                                    <p className=\"text-xs text-gray-500 mb-2 truncate max-w-full\">{u.followers?.length || 0} followers</p>\r\n                                    {user.following?.includes(u._id) ? (\r\n                                        <span className=\"text-[10px] font-bold text-gray-500 bg-gray-100 px-2 py-1 rounded-full w-full\">Following</span>\r\n                                    ) : (\r\n                                        <span className=\"text-[10px] font-bold text-primary-600 bg-primary-50 px-2 py-1 rounded-full w-full\">View Profile</span>\r\n                                    )}\r\n                                </Link>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {loading ? (\r\n                    <div className=\"py-20 flex flex-col items-center justify-center\">\r\n                        <ChefHat className=\"w-12 h-12 text-primary-500 animate-spin-slow mb-4\" />\r\n                        <p className=\"text-gray-500 font-medium\">Preparing your feed...</p>\r\n                    </div>\r\n                ) : recipes.length > 0 ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n                        {recipes.map((recipe, index) => (\r\n                            <Link to={`/recipe/${recipe._id || recipe.id}`} key={recipe._id || recipe.id} className=\"block group animate-slide-up\" style={{ animationDelay: `${index * 0.1}s` }}>\r\n                                <div className=\"liquid-card h-full flex flex-col border border-white/50 hover:border-primary-200 transition-colors\">\r\n                                    <div className=\"relative h-48 sm:h-56 overflow-hidden rounded-t-[22px]\">\r\n                                        <img\r\n                                            src={recipe.image}\r\n                                            alt={recipe.title}\r\n                                            className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\r\n                                        />\r\n                                        <div className=\"absolute top-4 left-4 flex gap-2\">\r\n                                            <span className=\"px-3 py-1 bg-white/90 backdrop-blur text-gray-900 text-xs font-bold rounded-lg shadow-sm\">\r\n                                                {recipe.category}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"p-5 sm:p-6 flex-1 flex flex-col bg-white/40 backdrop-blur-sm\">\r\n                                        <h3 className=\"text-xl font-bold text-gray-900 mb-2 group-hover:text-primary-600 transition-colors line-clamp-2\">\r\n                                            {recipe.title}\r\n                                        </h3>\r\n                                        {recipe.author ? (\r\n                                            <div className=\"flex items-center gap-2 mb-4\">\r\n                                                <img\r\n                                                    src={recipe.author.profilePhoto || 'https://api.dicebear.com/7.x/adventurer/svg?seed=Felix'}\r\n                                                    alt=\"author\"\r\n                                                    className=\"w-6 h-6 rounded-full\"\r\n                                                    onError={(e) => { e.target.src = \"https://api.dicebear.com/7.x/adventurer/svg?seed=Felix\"; }}\r\n                                                />\r\n                                                <span className=\"text-xs text-gray-500 font-medium flex items-center gap-1\">\r\n                                                    By {recipe.author.name}\r\n                                                    {(recipe.author.isVerified || recipe.author.isAdmin) && <BadgeCheck className=\"w-3 h-3 text-primary-500\" />}\r\n                                                </span>\r\n                                            </div>\r\n                                        ) : adminUser ? (\r\n                                            <div className=\"flex items-center gap-2 mb-4\">\r\n                                                <img src={adminUser.profilePhoto || \"https://api.dicebear.com/7.x/bottts/svg?seed=Chilli\"} alt=\"Chilli Team\" className=\"w-6 h-6 rounded-full object-cover bg-primary-50 border border-primary-100\" />\r\n                                                <span className=\"text-xs text-primary-600 font-bold flex items-center gap-1\">\r\n                                                    By {adminUser.name} <BadgeCheck className=\"w-3 h-3 text-primary-500\" />\r\n                                                </span>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"flex items-center gap-2 mb-4\">\r\n                                                <img src=\"https://api.dicebear.com/7.x/bottts/svg?seed=Chilli\" alt=\"Chilli Team\" className=\"w-6 h-6 rounded-full bg-primary-50 border border-primary-100\" />\r\n                                                <span className=\"text-xs text-primary-600 font-bold flex items-center gap-1\">By Official <BadgeCheck className=\"w-3 h-3 text-primary-500\" /></span>\r\n                                            </div>\r\n                                        )}\r\n                                        <div className=\"mt-auto pt-4 border-t border-gray-50 grid grid-cols-3 gap-2\">\r\n                                            <div className=\"flex flex-col items-center justify-center text-gray-500\">\r\n                                                <Star className=\"w-4 h-4 mb-1 text-orange-400\" />\r\n                                                <span className=\"text-xs font-bold text-gray-700\">{recipe.rating ? recipe.rating.toFixed(1) : 'New'}</span>\r\n                                            </div>\r\n                                            <div className=\"flex flex-col items-center justify-center text-gray-500 border-x border-gray-100\">\r\n                                                <Clock className=\"w-4 h-4 mb-1 text-primary-400\" />\r\n                                                <span className=\"text-xs font-semibold\">{recipe.time?.replace(' mins', 'm')}</span>\r\n                                            </div>\r\n                                            <div className=\"flex flex-col items-center justify-center text-gray-500\">\r\n                                                <Flame className=\"w-4 h-4 mb-1 text-rose-400\" />\r\n                                                <span className=\"text-xs font-semibold\">{recipe.difficulty}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </Link>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"glass-panel bg-white/60 rounded-[32px] p-8 sm:p-12 text-center shadow-lg border border-white/80 flex flex-col items-center mx-4 sm:mx-0\">\r\n                        <div className=\"w-16 h-16 sm:w-20 sm:h-20 bg-gray-50/80 rounded-full flex items-center justify-center mb-6 shadow-inner\">\r\n                            <Users className=\"w-8 h-8 sm:w-10 sm:h-10 text-gray-300\" />\r\n                        </div>\r\n                        <h3 className=\"text-lg sm:text-xl font-bold text-gray-900 mb-2\">\r\n                            {feedType === 'following' ? \"You aren't following anyone yet.\" : \"No recipes found here.\"}\r\n                        </h3>\r\n                        <p className=\"text-gray-500 max-w-sm mx-auto mb-6\">\r\n                            {feedType === 'following'\r\n                                ? \"Follow other cooks to see their delicious recipes appear in your personalized feed.\"\r\n                                : \"Check back later for fresh content.\"}\r\n                        </p>\r\n                        {feedType === 'following' && (\r\n                            <Link to=\"/recipes\" className=\"px-6 py-3 bg-primary-500 text-white font-bold rounded-xl hover:bg-primary-600 transition-colors shadow-sm\">\r\n                                Explore Recipes\r\n                            </Link>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Feed;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\Home.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\Login.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\Notifications.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\Profile.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  21 |         if (storedUser) {\n  22 |             const parsedUser = JSON.parse(storedUser);\n> 23 |             setUser(parsedUser);\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  24 |             setEditData(parsedUser);\n  25 |\n  26 |             const fetchUserData = async () => {","line":23,"column":13,"nodeType":null,"endLine":23,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":91,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { User, Mail, Calendar, Info, LogOut, Utensils, Heart, Edit2, Save } from 'lucide-react';\r\n\r\nconst Profile = () => {\r\n    const navigate = useNavigate();\r\n    const [user, setUser] = useState(null);\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [editData, setEditData] = useState({});\r\n    const [uploadedRecipes, setUploadedRecipes] = useState([]);\r\n    const [savedRecipesData, setSavedRecipesData] = useState([]);\r\n\r\n    // Full Screen Modal States\r\n    const [viewMode, setViewMode] = useState(null); // 'uploaded' | 'saved' | null\r\n    const [followModal, setFollowModal] = useState(null); // 'followers' | 'following' | null\r\n    const [allUsers, setAllUsers] = useState([]);\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n        const storedUser = localStorage.getItem('chilli_user');\r\n        if (storedUser) {\r\n            const parsedUser = JSON.parse(storedUser);\r\n            setUser(parsedUser);\r\n            setEditData(parsedUser);\r\n\r\n            const fetchUserData = async () => {\r\n                try {\r\n                    // Fetch user's uploaded recipes\r\n                    const res = await fetch('/api/recipes');\r\n                    if (res.ok) {\r\n                        const allRecipes = await res.json();\r\n                        setUploadedRecipes(allRecipes.filter(r =>\r\n                            (r.author && (r.author._id === parsedUser.id || r.author === parsedUser.id)) ||\r\n                            (parsedUser.isAdmin && !r.author)\r\n                        ));\r\n                    }\r\n                } catch (err) { console.error(err); }\r\n            };\r\n            fetchUserData();\r\n\r\n            const savedFavorites = JSON.parse(localStorage.getItem('chilli_favourites') || '[]');\r\n            setSavedRecipesData(savedFavorites);\r\n        } else {\r\n            // Re-route to login if no user is found\r\n            navigate('/login');\r\n        }\r\n    }, [navigate]);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('chilli_user');\r\n        window.dispatchEvent(new Event('authStatusChanged'));\r\n        navigate('/');\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        try {\r\n            const res = await fetch(`/api/users/profile/${user.id}`, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ ...editData, token: user.token })\r\n            });\r\n\r\n            if (res.ok) {\r\n                const updatedUser = await res.json();\r\n                localStorage.setItem('chilli_user', JSON.stringify(updatedUser));\r\n                setUser(updatedUser);\r\n                setIsEditing(false);\r\n                window.dispatchEvent(new Event('authStatusChanged'));\r\n            } else {\r\n                const errorData = await res.json();\r\n                alert(errorData.message || 'Failed to update profile');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating profile:', error);\r\n            alert('An error occurred while saving.');\r\n        }\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setEditData({ ...editData, [name]: value });\r\n    };\r\n\r\n    const handleOpenFollowModal = async (type) => {\r\n        setFollowModal(type);\r\n        try {\r\n            const res = await fetch('/api/users');\r\n            if (res.ok) {\r\n                setAllUsers(await res.json());\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to load users for modal');\r\n        }\r\n    };\r\n\r\n    if (!user) return null;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 pt-32 pb-20\">\r\n            <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n\r\n                {/* Profile Header */}\r\n                <div className=\"bg-white rounded-3xl p-8 sm:p-10 shadow-xl shadow-primary-500/5 mb-8 relative overflow-hidden animate-slide-up\">\r\n                    <div className=\"absolute top-0 left-0 w-full h-32 bg-gradient-to-r from-primary-400 to-orange-400\"></div>\r\n\r\n                    <div className=\"relative z-10 flex flex-col sm:flex-row items-center sm:items-end gap-6 pt-16\">\r\n                        <div className=\"w-32 h-32 bg-white rounded-full p-2 shadow-lg shrink-0\">\r\n                            <div className=\"w-full h-full bg-gradient-to-br from-primary-50 to-orange-50 rounded-full flex items-center justify-center border-2 border-primary-100\">\r\n                                <User className=\"w-16 h-16 text-primary-400\" />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 text-center sm:text-left\">\r\n                            {isEditing ? (\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"name\"\r\n                                    value={editData.name}\r\n                                    onChange={handleChange}\r\n                                    className=\"text-3xl sm:text-4xl font-extrabold text-gray-900 tracking-tight bg-gray-50 border border-gray-200 rounded-lg px-2 w-full max-w-sm mb-2\"\r\n                                />\r\n                            ) : (\r\n                                <h1 className=\"text-3xl sm:text-4xl font-extrabold text-gray-900 tracking-tight mb-2\">{user.name}</h1>\r\n                            )}\r\n\r\n                            {isEditing ? (\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"bio\"\r\n                                    value={editData.bio || ''}\r\n                                    onChange={handleChange}\r\n                                    placeholder=\"Add a bio...\"\r\n                                    className=\"text-gray-600 bg-gray-50 border border-gray-200 rounded-lg px-2 w-full max-w-md mb-2\"\r\n                                />\r\n                            ) : (\r\n                                <p className=\"text-gray-600 italic mb-2\">\"{user.bio || 'Home cook'}\"</p>\r\n                            )}\r\n\r\n                            <div className=\"flex items-center justify-center sm:justify-start gap-5 mt-3 mb-2\">\r\n                                <div onClick={() => handleOpenFollowModal('followers')} className=\"cursor-pointer hover:opacity-70 transition-opacity text-center sm:text-left group\">\r\n                                    <span className=\"text-gray-900 font-extrabold text-lg mr-1 group-hover:text-primary-600 transition-colors\">{user.followers?.length || 0}</span>\r\n                                    <span className=\"text-xs text-gray-500 uppercase tracking-wider font-semibold\">Followers</span>\r\n                                </div>\r\n                                <div onClick={() => handleOpenFollowModal('following')} className=\"cursor-pointer hover:opacity-70 transition-opacity text-center sm:text-left group\">\r\n                                    <span className=\"text-gray-900 font-extrabold text-lg mr-1 group-hover:text-primary-600 transition-colors\">{user.following?.length || 0}</span>\r\n                                    <span className=\"text-xs text-gray-500 uppercase tracking-wider font-semibold\">Following</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <p className=\"text-primary-600 font-medium mt-1 flex items-center justify-center sm:justify-start gap-2\">\r\n                                <Mail className=\"w-4 h-4\" /> {user.email}\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"shrink-0 mt-6 sm:mt-0 flex flex-wrap justify-center sm:justify-start gap-2 w-full sm:w-auto\">\r\n                            {isEditing ? (\r\n                                <button\r\n                                    onClick={handleSave}\r\n                                    className=\"flex items-center gap-2 px-6 py-3 bg-primary-500 text-white hover:bg-primary-600 rounded-xl font-bold transition-colors shadow-sm\"\r\n                                >\r\n                                    <Save className=\"w-5 h-5\" />\r\n                                    Save\r\n                                </button>\r\n                            ) : (\r\n                                <button\r\n                                    onClick={() => setIsEditing(true)}\r\n                                    className=\"flex items-center justify-center gap-2 px-6 py-3 bg-primary-50 text-primary-600 hover:bg-primary-100 rounded-xl font-bold transition-colors shadow-sm flex-1 sm:flex-none\"\r\n                                >\r\n                                    <Edit2 className=\"w-5 h-5\" />\r\n                                    Edit\r\n                                </button>\r\n                            )}\r\n                            <button\r\n                                onClick={handleLogout}\r\n                                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 text-gray-700 hover:bg-rose-50 hover:text-rose-600 rounded-xl font-bold transition-colors shadow-sm flex-1 sm:flex-none\"\r\n                            >\r\n                                <LogOut className=\"w-5 h-5\" />\r\n                                Sign Out\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Profile Details Grid */}\r\n                <div className=\"grid md:grid-cols-2 gap-8 animate-slide-up\" style={{ animationDelay: '0.1s' }}>\r\n\r\n                    {/* Personal Info Card */}\r\n                    <div className=\"bg-white rounded-3xl p-8 shadow-lg shadow-gray-200/50 flex flex-col gap-6\">\r\n                        <h2 className=\"text-xl font-bold flex items-center gap-2 text-gray-900 border-b border-gray-100 pb-4\">\r\n                            <Info className=\"w-6 h-6 text-primary-500\" />\r\n                            Personal Details\r\n                        </h2>\r\n\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                            <div className=\"bg-gray-50 rounded-xl p-4\">\r\n                                <p className=\"text-xs text-gray-500 uppercase font-semibold mb-1\">Age</p>\r\n                                {isEditing ? (\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        name=\"age\"\r\n                                        value={editData.age}\r\n                                        onChange={handleChange}\r\n                                        className=\"text-lg font-medium text-gray-900 bg-white border border-gray-200 rounded px-2 w-20\"\r\n                                    />\r\n                                ) : (\r\n                                    <p className=\"text-lg font-medium text-gray-900\">{user.age} <span className=\"text-sm text-gray-400 font-normal\">years old</span></p>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"bg-gray-50 rounded-xl p-4\">\r\n                                <p className=\"text-xs text-gray-500 uppercase font-semibold mb-1\">Date of Birth</p>\r\n                                <div className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\r\n                                    <Calendar className=\"w-4 h-4 text-gray-400\" />\r\n                                    {isEditing ? (\r\n                                        <input\r\n                                            type=\"date\"\r\n                                            name=\"dob\"\r\n                                            value={editData.dob}\r\n                                            onChange={handleChange}\r\n                                            className=\"bg-white border border-gray-200 rounded px-2 focus:outline-none focus:border-primary-500 text-sm\"\r\n                                        />\r\n                                    ) : (\r\n                                        <span>{user.dob}</span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-primary-50 rounded-xl p-5 border border-primary-100 mt-2\">\r\n                            <p className=\"text-xs text-primary-600 uppercase font-bold mb-2 flex items-center gap-2\">\r\n                                <Utensils className=\"w-4 h-4\" /> Favourite Dish\r\n                            </p>\r\n                            {isEditing ? (\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"favoriteDish\"\r\n                                    value={editData.favoriteDish || ''}\r\n                                    onChange={handleChange}\r\n                                    placeholder=\"e.g. Butter Chicken\"\r\n                                    className=\"text-xl font-extrabold text-gray-900 w-full bg-white border border-primary-200 rounded p-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                                />\r\n                            ) : (\r\n                                <p className=\"text-xl font-extrabold text-gray-900\">{user.favoriteDish || 'Not set'}</p>\r\n                            )}\r\n\r\n                            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6 border-t border-primary-200/50 pt-4\">\r\n                                <div>\r\n                                    <p className=\"text-xs text-primary-600/80 uppercase font-bold mb-1 border-b border-primary-200 pb-1\">Spice Level</p>\r\n                                    {isEditing ? (\r\n                                        <select\r\n                                            name=\"spiceLevel\"\r\n                                            value={editData.spiceLevel || 'Medium'}\r\n                                            onChange={handleChange}\r\n                                            className=\"w-full bg-white border border-primary-200 rounded p-1 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                                        >\r\n                                            <option value=\"Mild\">Mild</option>\r\n                                            <option value=\"Medium\">Medium</option>\r\n                                            <option value=\"Spicy\">Spicy</option>\r\n                                            <option value=\"Extra Spicy\">Extra Spicy</option>\r\n                                        </select>\r\n                                    ) : (\r\n                                        <p className=\"font-semibold text-gray-800\">{user.spiceLevel || 'Medium'}</p>\r\n                                    )}\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-xs text-primary-600/80 uppercase font-bold mb-1 border-b border-primary-200 pb-1\">Fav Cuisine</p>\r\n                                    {isEditing ? (\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            name=\"favoriteCuisine\"\r\n                                            value={editData.favoriteCuisine || ''}\r\n                                            onChange={handleChange}\r\n                                            placeholder=\"e.g. Italian\"\r\n                                            className=\"w-full bg-white border border-primary-200 rounded p-1 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                                        />\r\n                                    ) : (\r\n                                        <p className=\"font-semibold text-gray-800\">{user.favoriteCuisine || 'Not set'}</p>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Extras Card */}\r\n                    <div className=\"bg-white rounded-3xl p-8 shadow-lg shadow-gray-200/50 flex flex-col gap-6\">\r\n                        <h2 className=\"text-xl font-bold flex items-center gap-2 text-gray-900 border-b border-gray-100 pb-4\">\r\n                            <Heart className=\"w-6 h-6 text-rose-500\" />\r\n                            Preferences & Health\r\n                        </h2>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"bg-rose-50 rounded-xl p-4 border border-rose-100\">\r\n                                <p className=\"text-xs text-rose-500 uppercase font-bold mb-2\">Dietary Preference</p>\r\n                                {isEditing ? (\r\n                                    <select\r\n                                        name=\"dietaryPreference\"\r\n                                        value={editData.dietaryPreference || 'None'}\r\n                                        onChange={handleChange}\r\n                                        className=\"w-full bg-white border border-rose-200 rounded p-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-rose-400\"\r\n                                    >\r\n                                        <option value=\"None\">None</option>\r\n                                        <option value=\"Vegetarian\">Vegetarian</option>\r\n                                        <option value=\"Vegan\">Vegan</option>\r\n                                        <option value=\"Pescatarian\">Pescatarian</option>\r\n                                        <option value=\"Keto\">Keto</option>\r\n                                        <option value=\"Paleo\">Paleo</option>\r\n                                        <option value=\"Gluten-Free\">Gluten-Free</option>\r\n                                    </select>\r\n                                ) : (\r\n                                    <p className=\"font-semibold text-gray-900\">{user.dietaryPreference || 'None'}</p>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"bg-rose-50 rounded-xl p-4 border border-rose-100\">\r\n                                <p className=\"text-xs text-rose-500 uppercase font-bold mb-2\">Allergies</p>\r\n                                {isEditing ? (\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"allergies\"\r\n                                        value={editData.allergies || ''}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"e.g. Peanuts, Dairy\"\r\n                                        className=\"w-full bg-white border border-rose-200 rounded p-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-rose-400\"\r\n                                    />\r\n                                ) : (\r\n                                    <p className=\"font-semibold text-gray-900\">{user.allergies || 'None'}</p>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 bg-gray-50 rounded-xl p-6 border-l-4 border-rose-300\">\r\n                            <p className=\"text-xs text-gray-500 uppercase font-semibold mb-2\">Additional Notes / Extras</p>\r\n                            {isEditing ? (\r\n                                <textarea\r\n                                    name=\"extras\"\r\n                                    value={editData.extras || ''}\r\n                                    onChange={handleChange}\r\n                                    rows={3}\r\n                                    placeholder=\"Any other preferences or notes...\"\r\n                                    className=\"w-full bg-white border border-gray-200 rounded p-2 text-gray-700 leading-relaxed italic focus:outline-none focus:ring-2 focus:ring-rose-400 resize-none\"\r\n                                />\r\n                            ) : (\r\n                                <p className=\"text-gray-700 leading-relaxed italic\">{user.extras ? `\"${user.extras}\"` : 'No additional notes provided.'}</p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                {/* Recipes Section */}\r\n                <div className=\"mt-8 grid md:grid-cols-2 gap-8 animate-slide-up\" style={{ animationDelay: '0.2s' }}>\r\n                    <div className=\"bg-white rounded-3xl p-8 shadow-lg shadow-gray-200/50 flex flex-col gap-6\">\r\n                        <div className=\"flex items-center justify-between border-b border-gray-100 pb-4\">\r\n                            <h2 className=\"text-xl font-bold flex items-center gap-2 text-gray-900\">\r\n                                <Utensils className=\"w-6 h-6 text-primary-500\" />\r\n                                My Uploaded Recipes\r\n                            </h2>\r\n                            <span className=\"bg-primary-50 text-primary-600 text-xs font-bold px-2.5 py-1 rounded-full\">{uploadedRecipes.length}</span>\r\n                        </div>\r\n                        {uploadedRecipes.length > 0 ? (\r\n                            <div className=\"space-y-4\">\r\n                                {uploadedRecipes.slice(0, 3).map(recipe => (\r\n                                    <Link to={`/recipe/${recipe._id || recipe.id}`} key={recipe._id || recipe.id} className=\"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-xl transition-colors border border-transparent hover:border-gray-100 group\">\r\n                                        <img src={recipe.image} alt={recipe.title} className=\"w-16 h-16 rounded-lg object-cover group-hover:scale-105 transition-transform\" />\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-gray-900 line-clamp-1\">{recipe.title}</h4>\r\n                                            <p className=\"text-sm text-gray-500\">{recipe.difficulty}  {recipe.time}</p>\r\n                                        </div>\r\n                                    </Link>\r\n                                ))}\r\n                                {uploadedRecipes.length > 3 && (\r\n                                    <button onClick={() => setViewMode('uploaded')} className=\"w-full py-3 mt-2 text-sm font-bold text-primary-600 bg-primary-50 hover:bg-primary-100 rounded-xl transition-colors\">\r\n                                        View All ({uploadedRecipes.length})\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"text-center py-8 text-gray-500 italic bg-gray-50 rounded-xl border border-dashed border-gray-200\">\r\n                                You haven't uploaded any recipes yet.\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"bg-white rounded-3xl p-8 shadow-lg shadow-gray-200/50 flex flex-col gap-6\">\r\n                        <div className=\"flex items-center justify-between border-b border-gray-100 pb-4\">\r\n                            <h2 className=\"text-xl font-bold flex items-center gap-2 text-gray-900\">\r\n                                <Heart className=\"w-6 h-6 text-rose-500\" />\r\n                                Saved Recipes\r\n                            </h2>\r\n                            <span className=\"bg-rose-50 text-rose-600 text-xs font-bold px-2.5 py-1 rounded-full\">{savedRecipesData.length}</span>\r\n                        </div>\r\n                        {savedRecipesData.length > 0 ? (\r\n                            <div className=\"space-y-4\">\r\n                                {savedRecipesData.slice(0, 3).map(recipe => (\r\n                                    <Link to={`/recipe/${recipe._id || recipe.id}`} key={recipe._id || recipe.id} className=\"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-xl transition-colors border border-transparent hover:border-gray-100 group\">\r\n                                        <img\r\n                                            src={recipe.image || 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c'}\r\n                                            onError={(e) => { e.target.onerror = null; e.target.src = 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c' }}\r\n                                            alt={recipe.title}\r\n                                            className=\"w-16 h-16 rounded-lg object-cover group-hover:scale-105 transition-transform\" />\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-gray-900 line-clamp-1\">{recipe.title}</h4>\r\n                                            <p className=\"text-sm text-gray-500\">{recipe.difficulty}  {recipe.time}</p>\r\n                                        </div>\r\n                                    </Link>\r\n                                ))}\r\n                                {savedRecipesData.length > 3 && (\r\n                                    <button onClick={() => setViewMode('saved')} className=\"w-full py-3 mt-2 text-sm font-bold text-rose-600 bg-rose-50 hover:bg-rose-100 rounded-xl transition-colors\">\r\n                                        View All ({savedRecipesData.length})\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"text-center py-8 text-gray-500 italic bg-gray-50 rounded-xl border border-dashed border-gray-200\">\r\n                                You haven't saved any recipes yet.\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Full Screen Grid Modal */}\r\n            {viewMode && (\r\n                <div className=\"fixed inset-0 z-[101] bg-white flex flex-col overflow-hidden animate-slide-up\">\r\n                    <div className={`p-4 sm:p-6 flex items-center justify-between shadow-sm z-10 ${viewMode === 'uploaded' ? 'bg-primary-500 text-white' : 'bg-rose-500 text-white'}`}>\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold flex items-center gap-2\">\r\n                            {viewMode === 'uploaded' ? <Utensils className=\"w-6 h-6\" /> : <Heart className=\"w-6 h-6\" />}\r\n                            {viewMode === 'uploaded' ? 'My Uploaded Recipes' : 'Saved Recipes'}\r\n                            <span className=\"text-sm opacity-80 ml-2 bg-white/20 px-2 py-0.5 rounded-full\">\r\n                                {viewMode === 'uploaded' ? uploadedRecipes.length : savedRecipesData.length}\r\n                            </span>\r\n                        </h2>\r\n                        <button\r\n                            onClick={() => setViewMode(null)}\r\n                            className=\"p-2 hover:bg-white/20 rounded-full transition-colors font-bold text-sm bg-white/10\"\r\n                        >\r\n                            Close\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 overflow-y-auto p-4 sm:p-6 lg:p-10 bg-gray-50\">\r\n                        <div className=\"max-w-7xl mx-auto grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8\">\r\n                            {(viewMode === 'uploaded' ? uploadedRecipes : savedRecipesData).map(recipe => (\r\n                                <Link to={`/recipe/${recipe._id || recipe.id}`} key={recipe._id || recipe.id} className=\"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all border border-gray-100 group flex flex-col items-center p-3 sm:p-4 text-center\">\r\n                                    <div className=\"w-full aspect-square rounded-xl overflow-hidden mb-3 relative\">\r\n                                        <img\r\n                                            src={recipe.image || 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c'}\r\n                                            onError={(e) => { e.target.onerror = null; e.target.src = 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c' }}\r\n                                            alt={recipe.title}\r\n                                            className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\" />\r\n                                        <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-3\">\r\n                                            <span className=\"text-white text-xs font-bold px-2 py-1 bg-white/20 backdrop-blur-md rounded-full\">View Recipe</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <h4 className=\"font-bold text-gray-900 line-clamp-2 w-full leading-tight text-sm sm:text-base\">{recipe.title}</h4>\r\n                                    <p className=\"text-xs text-gray-500 mt-2 font-medium bg-gray-50 px-3 py-1 rounded-lg w-full truncate\">{recipe.difficulty}  {recipe.time}</p>\r\n                                </Link>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {/* Followers / Following Modal */}\r\n            {followModal && (\r\n                <div className=\"fixed inset-0 z-[200] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in\" onClick={() => setFollowModal(null)}>\r\n                    <div className=\"bg-white rounded-[32px] w-full max-w-sm overflow-hidden shadow-2xl transform scale-100 animate-slide-up\" onClick={e => e.stopPropagation()}>\r\n                        <div className=\"p-4 border-b border-gray-100 flex items-center justify-between bg-white relative\">\r\n                            <h3 className=\"font-extrabold text-lg text-gray-900 capitalize mx-auto\">{followModal}</h3>\r\n                            <button onClick={() => setFollowModal(null)} className=\"absolute right-4 p-2 bg-gray-100 hover:bg-gray-200 rounded-full text-gray-600 transition-colors font-bold text-[10px] uppercase tracking-wider\">Close</button>\r\n                        </div>\r\n                        <div className=\"max-h-[60vh] overflow-y-auto p-2 custom-scrollbar bg-gray-50/30\">\r\n                            {(() => {\r\n                                const listIds = followModal === 'followers' ? user.followers : user.following;\r\n                                if (!listIds || listIds.length === 0) return <div className=\"p-10 text-center text-gray-500 text-sm font-medium\">No {followModal} found.</div>;\r\n\r\n                                const listUsers = allUsers.filter(u => listIds.some(id => (id._id || id) === u._id));\r\n\r\n                                if (listUsers.length === 0) return <div className=\"p-10 flex justify-center\"><div className=\"w-6 h-6 border-2 border-primary-500 border-t-transparent rounded-full animate-spin\"></div></div>;\r\n\r\n                                return listUsers.map(u => (\r\n                                    <Link key={u._id} to={`/user/${u._id}`} onClick={() => setFollowModal(null)} className=\"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-2xl transition-colors group\">\r\n                                        <img src={u.profilePhoto || \"https://api.dicebear.com/7.x/adventurer/svg?seed=Felix\"} className=\"w-12 h-12 rounded-full object-cover border border-gray-200 group-hover:scale-105 transition-transform\" alt={u.name} />\r\n                                        <div className=\"flex-1 overflow-hidden\">\r\n                                            <h4 className=\"font-bold text-gray-900 text-sm truncate\">{u.name}</h4>\r\n                                            <p className=\"text-xs text-gray-500 truncate font-medium\">{u.followers?.length || 0} followers</p>\r\n                                        </div>\r\n                                    </Link>\r\n                                ));\r\n                            })()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\RecipeDetail.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'recipe'. Either include it or remove the dependency array.","line":124,"column":8,"nodeType":"ArrayExpression","endLine":124,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [id, recipe, recipe.id]","fix":{"range":[4800,4816],"text":"[id, recipe, recipe.id]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'text' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":207,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":207,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"text"},"fix":{"range":[7734,7840],"text":""},"desc":"Remove unused variable 'text'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport { Clock, Flame, User, ArrowLeft, Heart, Share2, PlayCircle, Plus, Check, ChefHat, Star, MessageSquare, X, Printer, ShoppingCart, Activity, ChevronRight, ChevronLeft, MapPin, Bookmark, BadgeCheck } from 'lucide-react';\r\nimport { recipes as initialRecipes } from '../data/mockRecipes';\r\n\r\n// Helper to convert standard YouTube links into embeddable iframe links\r\nconst getEmbedUrl = (url) => {\r\n    if (!url) return '';\r\n    const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n    const match = url.match(regExp);\r\n    return (match && match[2].length === 11) ? `https://www.youtube.com/embed/${match[2]}` : url;\r\n};\r\n\r\nconst RecipeDetail = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    const [recipe, setRecipe] = useState(() => {\r\n        // Fallback to local storage if API is slow or fails\r\n        const saved = localStorage.getItem('chilli_recipes');\r\n        const parsedSaved = saved ? JSON.parse(saved) : initialRecipes;\r\n        return parsedSaved.find(r => r.id === id) || null;\r\n    });\r\n\r\n    const [isFavourite, setIsFavourite] = useState(false);\r\n    const [showShareTooltip, setShowShareTooltip] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // New Feature States\r\n    const [cookMode, setCookMode] = useState(false);\r\n    const [cookStep, setCookStep] = useState(0);\r\n\r\n    const user = JSON.parse(localStorage.getItem('chilli_user'));\r\n    const [rating, setRating] = useState(0);\r\n    const [hoverRating, setHoverRating] = useState(0);\r\n    const [reviewComment, setReviewComment] = useState('');\r\n    const [isLiked, setIsLiked] = useState(false);\r\n    const [likeCount, setLikeCount] = useState(0);\r\n\r\n    const [adminUser, setAdminUser] = useState(null);\r\n\r\n    const submitReview = async () => {\r\n        if (!user) {\r\n            alert(\"Please log in to leave a review.\");\r\n            navigate('/login');\r\n            return;\r\n        }\r\n        if (rating === 0) {\r\n            alert(\"Please select a star rating.\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await fetch(`/api/recipes/${recipe.id}/reviews`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    userId: user.id,\r\n                    userName: user.name,\r\n                    rating,\r\n                    comment: reviewComment\r\n                })\r\n            });\r\n\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setRecipe({ ...data.recipe, id: data.recipe._id.toString() });\r\n                setRating(0);\r\n                setReviewComment('');\r\n            } else {\r\n                const err = await res.json();\r\n                alert(err.message || 'Error submitting review');\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Failed to submit review\", err);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n\r\n        const fetchRecipe = async () => {\r\n            try {\r\n                const res = await fetch(`/api/recipes/${id}`);\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    setRecipe({ ...data, id: data._id.toString() });\r\n                    if (data.likes) {\r\n                        setLikeCount(data.likes.length);\r\n                        const storedUser = JSON.parse(localStorage.getItem('chilli_user'));\r\n                        if (storedUser && data.likes.includes(storedUser.id)) {\r\n                            setIsLiked(true);\r\n                        }\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Failed to fetch recipe from API\", err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        const fetchAdminUser = async () => {\r\n            try {\r\n                const res = await fetch('/api/users');\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    const admin = data.find(u => u.isAdmin);\r\n                    if (admin) setAdminUser(admin);\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Failed to fetch admin user\", err);\r\n            }\r\n        };\r\n\r\n        fetchRecipe();\r\n        fetchAdminUser();\r\n\r\n        if (recipe) {\r\n            const savedFavourites = JSON.parse(localStorage.getItem('chilli_favourites') || '[]');\r\n            setIsFavourite(savedFavourites.some(r => r.id === recipe.id));\r\n        }\r\n    }, [id, recipe?.id]);\r\n\r\n    const handleLikeToggle = async () => {\r\n        if (!user) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n        try {\r\n            const res = await fetch(`/api/recipes/${recipe.id}/like`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ userId: user.id })\r\n            });\r\n\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setIsLiked(!isLiked);\r\n                setLikeCount(data.likes.length);\r\n            }\r\n        } catch (err) {\r\n            console.error('Error toggling like:', err);\r\n        }\r\n    };\r\n\r\n    if (loading && !recipe) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center relative z-0 flex-col\">\r\n                <ChefHat className=\"w-16 h-16 text-primary-500 animate-bounce mb-4\" />\r\n                <h2 className=\"text-2xl font-bold text-gray-900\">Cooking up your recipe...</h2>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!recipe) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center relative z-0 flex-col\">\r\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">Recipe Not Found</h2>\r\n                <Link to=\"/recipes\" className=\"text-primary-600 hover:underline\">Return to Recipes</Link>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const handleBack = () => {\r\n        if (location.state?.fromSearch) {\r\n            navigate(-1);\r\n        } else {\r\n            navigate('/recipes');\r\n        }\r\n    };\r\n\r\n    const toggleFavourite = () => {\r\n        const savedFavourites = JSON.parse(localStorage.getItem('chilli_favourites') || '[]');\r\n        if (isFavourite) {\r\n            const newFavourites = savedFavourites.filter(r => r.id !== recipe.id);\r\n            localStorage.setItem('chilli_favourites', JSON.stringify(newFavourites));\r\n            setIsFavourite(false);\r\n        } else {\r\n            savedFavourites.push(recipe);\r\n            localStorage.setItem('chilli_favourites', JSON.stringify(savedFavourites));\r\n            setIsFavourite(true);\r\n        }\r\n    };\r\n\r\n    const handleShare = async () => {\r\n        const shareData = {\r\n            title: `Chilli Recipe: ${recipe.title}`,\r\n            text: `Check out this amazing ${recipe.title} recipe on Chilli!`,\r\n            url: window.location.href\r\n        };\r\n        try {\r\n            if (navigator.share) {\r\n                await navigator.share(shareData);\r\n            } else {\r\n                await navigator.clipboard.writeText(window.location.href);\r\n                setShowShareTooltip(true);\r\n                setTimeout(() => setShowShareTooltip(false), 2000);\r\n            }\r\n        } catch (err) {\r\n            console.error('Error sharing:', err);\r\n        }\r\n    };\r\n\r\n    const handleGenerateGroceryList = () => {\r\n        const text = `Grocery List for ${recipe.title}:\\n\\n` + recipe.ingredients.map(i => `[ ] ${i}`).join('\\n');\r\n\r\n        // Create a fake print window to download PDF/Print\r\n        const printWindow = window.open('', '_blank');\r\n        printWindow.document.write(`\r\n            <html><head><title>Grocery List - Chilli</title>\r\n            <style>body{font-family:sans-serif; padding:40px; line-height:1.6;} h1{color:#ff4500;} ul{list-style:none; padding:0;} li{margin-bottom:10px; border-bottom:1px solid #eee; padding-bottom:5px;} input{margin-right:10px;}</style>\r\n            </head><body>\r\n            <h1> ${recipe.title} Grocery List</h1>\r\n            <ul>${recipe.ingredients.map(i => `<li><input type=\"checkbox\"> ${i}</li>`).join('')}</ul>\r\n            <script>window.print();</script>\r\n            </body></html>\r\n        `);\r\n        printWindow.document.close();\r\n    };\r\n\r\n    const nextCookStep = () => {\r\n        if (cookStep < recipe.steps.length - 1) setCookStep(cookStep + 1);\r\n    };\r\n\r\n    const prevCookStep = () => {\r\n        if (cookStep > 0) setCookStep(cookStep - 1);\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen pb-20 relative z-0\">\r\n            {/* Hero Header */}\r\n            <div className=\"relative w-full min-h-[480px] lg:min-h-[550px] flex flex-col justify-between pt-28 pb-28 md:pb-32\">\r\n                <div className=\"absolute inset-0 z-0\">\r\n                    <img\r\n                        src={recipe.image || 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c'}\r\n                        onError={(e) => { e.target.onerror = null; e.target.src = 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c' }}\r\n                        alt={recipe.title}\r\n                        className=\"w-full h-full object-cover\"\r\n                    />\r\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-gray-900/95 via-gray-900/40 to-transparent\"></div>\r\n                </div>\r\n\r\n                <div className=\"hidden sm:block relative z-50 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 mb-8\">\r\n                    <button\r\n                        onClick={handleBack}\r\n                        className=\"inline-flex items-center gap-2 px-4 py-2 bg-black/40 hover:bg-black/60 backdrop-blur-md rounded-full text-white transition-colors text-sm font-bold border border-white/20 cursor-pointer shadow-sm w-max\"\r\n                    >\r\n                        <ArrowLeft className=\"w-4 h-4\" /> Back\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full mt-auto\">\r\n                    <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-6\">\r\n                        <div className=\"max-w-3xl animate-slide-up\">\r\n                            <span className=\"inline-block px-3 py-1 bg-primary-500 text-white text-xs font-bold uppercase tracking-wider rounded-lg mb-3 sm:mb-4\">\r\n                                {recipe.category}\r\n                            </span>\r\n                            <h1 className=\"text-3xl sm:text-5xl lg:text-6xl font-extrabold text-white leading-tight mb-4 line-clamp-3 md:line-clamp-2\">\r\n                                {recipe.title}\r\n                            </h1>\r\n                            {recipe.author ? (\r\n                                <div className=\"flex items-center gap-3 mb-4\">\r\n                                    <img src={recipe.author.profilePhoto || 'https://api.dicebear.com/7.x/adventurer/svg?seed=Felix'} alt={recipe.author.name} className=\"w-8 h-8 rounded-full border border-white/40\" />\r\n                                    <Link to={`/user/${recipe.author._id}`} className=\"text-white hover:text-primary-300 font-medium transition-colors flex items-center gap-1.5\">\r\n                                        By {recipe.author.name}\r\n                                        {(recipe.author.isVerified || recipe.author.isAdmin) && <BadgeCheck className=\"w-4 h-4 text-primary-500\" />}\r\n                                    </Link>\r\n                                </div>\r\n                            ) : adminUser ? (\r\n                                <div className=\"flex items-center gap-3 mb-4 text-white font-medium\">\r\n                                    <img src={adminUser.profilePhoto || \"https://api.dicebear.com/7.x/bottts/svg?seed=Chilli\"} alt=\"Chilli Team\" className=\"w-8 h-8 rounded-full border border-white/40 bg-white/20 object-cover\" />\r\n                                    <Link to={`/user/${adminUser._id}`} className=\"text-white hover:text-primary-300 transition-colors font-bold flex items-center gap-1.5\">\r\n                                        By {adminUser.name} <BadgeCheck className=\"w-4 h-4 text-primary-500\" />\r\n                                    </Link>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"flex items-center gap-3 mb-4 text-white font-medium\">\r\n                                    <img src=\"https://api.dicebear.com/7.x/bottts/svg?seed=Chilli\" alt=\"Chilli Team\" className=\"w-8 h-8 rounded-full border border-white/40 bg-white/20\" />\r\n                                    <span className=\"text-white font-bold flex items-center gap-1.5\">By Official <BadgeCheck className=\"w-4 h-4 text-primary-500\" /></span>\r\n                                </div>\r\n                            )}\r\n                            <div className=\"flex items-center gap-2 mb-4\">\r\n                                <div className=\"flex items-center text-orange-400\">\r\n                                    <Star className=\"w-5 h-5 fill-current\" />\r\n                                    <span className=\"ml-1 font-bold text-white\">{recipe.rating ? recipe.rating.toFixed(1) : 'New'}</span>\r\n                                </div>\r\n                                <span className=\"text-gray-400 text-sm\">({recipe.numReviews || 0} reviews)</span>\r\n                            </div>\r\n                            <p className=\"text-lg text-gray-300 max-w-2xl leading-relaxed line-clamp-3 sm:line-clamp-4\">\r\n                                {recipe.description}\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-3 sm:gap-4 animate-slide-up\" style={{ animationDelay: '0.1s' }}>\r\n                            <div className=\"flex items-center gap-2 bg-white/10 backdrop-blur-md rounded-full pr-1 shadow-sm border border-white/20\">\r\n                                <button\r\n                                    onClick={handleLikeToggle}\r\n                                    className={`p-2.5 sm:p-3 rounded-full transition-all hover:scale-110 flex items-center gap-2 ${isLiked ? 'text-rose-500' : 'text-white'}`}\r\n                                >\r\n                                    <Heart className={`w-6 h-6 ${isLiked ? 'fill-rose-500' : ''}`} />\r\n                                </button>\r\n                                <span className=\"text-white font-bold mr-3\">{likeCount}</span>\r\n                            </div>\r\n                            <div className=\"relative\">\r\n                                <button onClick={handleShare} className=\"p-3 bg-white/20 hover:bg-white/30 backdrop-blur-md rounded-full text-white transition-all hover:scale-110\">\r\n                                    <Share2 className=\"w-6 h-6\" />\r\n                                </button>\r\n                                {showShareTooltip && (\r\n                                    <div className=\"absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1 bg-gray-900 text-white text-xs rounded-lg whitespace-nowrap animate-fade-in shadow-lg before:content-[''] before:absolute before:-bottom-1 before:left-1/2 before:-translate-x-1/2 before:border-4 before:border-transparent before:border-t-gray-900\">\r\n                                        Link copied!\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                            <button\r\n                                onClick={toggleFavourite}\r\n                                className={`flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 rounded-full font-bold shadow-xl transition-all hover:-translate-y-1 ${isFavourite\r\n                                    ? 'bg-rose-50 text-rose-600 border border-rose-200'\r\n                                    : 'bg-white text-gray-900 hover:bg-primary-50 hover:text-primary-600'\r\n                                    }`}\r\n                            >\r\n                                <Bookmark className={`w-5 h-5 transition-colors ${isFavourite ? 'text-rose-500 fill-rose-500' : 'text-gray-400'}`} />\r\n                                {isFavourite ? 'Saved' : 'Save'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 sm:mt-8\">\r\n                {/* Key Stats Bar */}\r\n                <div className=\"glass-panel-dark text-white rounded-3xl p-5 sm:p-6 lg:px-12 mb-8 sm:mb-12 grid grid-cols-3 gap-4 sm:flex sm:flex-wrap sm:gap-8 sm:justify-between items-center animate-slide-up shadow-2xl relative -mt-16 sm:-mt-20 z-20\">\r\n                    <div className=\"flex flex-col items-center sm:hidden text-center col-span-1\">\r\n                        <Clock className=\"w-5 h-5 text-primary-400 mb-1\" />\r\n                        <p className=\"font-bold text-sm sm:text-lg\">{recipe.time}</p>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-center sm:hidden text-center col-span-1 border-x border-gray-700\">\r\n                        <Flame className=\"w-5 h-5 text-orange-400 mb-1\" />\r\n                        <p className=\"font-bold text-sm sm:text-lg\">{recipe.difficulty}</p>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-center sm:hidden text-center col-span-1\">\r\n                        <User className=\"w-5 h-5 text-purple-400 mb-1\" />\r\n                        <p className=\"font-bold text-sm sm:text-lg\">{recipe.servings || 4}</p>\r\n                    </div>\r\n\r\n                    {/* Desktop Stats (Hidden on Small Mobile) */}\r\n                    <div className=\"hidden sm:flex items-center gap-3\">\r\n                        <Clock className=\"w-6 h-6 text-primary-400\" />\r\n                        <div>\r\n                            <p className=\"text-xs text-gray-400 uppercase tracking-wide font-medium\">Prep time</p>\r\n                            <p className=\"font-bold text-lg\">{recipe.time}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"hidden sm:block w-px h-10 bg-gray-700\"></div>\r\n                    <div className=\"hidden sm:flex items-center gap-3\">\r\n                        <Flame className=\"w-6 h-6 text-orange-400\" />\r\n                        <div>\r\n                            <p className=\"text-xs text-gray-400 uppercase tracking-wide font-medium\">Difficulty</p>\r\n                            <p className=\"font-bold text-lg\">{recipe.difficulty}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"hidden sm:block w-px h-10 bg-gray-700\"></div>\r\n                    <div className=\"hidden sm:flex items-center gap-3\">\r\n                        <User className=\"w-6 h-6 text-purple-400\" />\r\n                        <div>\r\n                            <p className=\"text-xs text-gray-400 uppercase tracking-wide font-medium\">Servings</p>\r\n                            <p className=\"font-bold text-lg\">{recipe.servings || 4} People</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {recipe.calories > 0 && (\r\n                        <div className=\"bg-white rounded-3xl p-6 sm:px-12 mb-12 flex flex-wrap gap-8 sm:justify-between items-center shadow-lg border border-gray-100\">\r\n                            <div className=\"flex items-center gap-3 w-full sm:w-auto text-primary-600 font-bold\">\r\n                                <Activity className=\"w-5 h-5\" /> Nutrition Facts\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"text-gray-500 text-sm\">Calories:</span>\r\n                                <span className=\"font-bold text-gray-900\">{recipe.calories} kcal</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"text-gray-500 text-sm\">Protein:</span>\r\n                                <span className=\"font-bold text-gray-900\">{recipe.protein}g</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"text-gray-500 text-sm\">Carbs:</span>\r\n                                <span className=\"font-bold text-gray-900\">{recipe.carbs}g</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"text-gray-500 text-sm\">Fat:</span>\r\n                                <span className=\"font-bold text-gray-900\">{recipe.fat}g</span>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex flex-col lg:grid lg:grid-cols-3 gap-8 lg:gap-12\">\r\n                        {/* Main Content: Steps and Video */}\r\n                        <div className=\"lg:col-span-2 space-y-8 lg:space-y-12 order-2 lg:order-1 animate-slide-up\" style={{ animationDelay: '0.2s' }}>\r\n\r\n                            {/* Video Section */}\r\n                            {recipe.videoUrl && (\r\n                                <section className=\"liquid-card p-6\">\r\n                                    <div className=\"flex items-center gap-2 mb-6\">\r\n                                        <PlayCircle className=\"w-6 h-6 text-primary-500\" />\r\n                                        <h2 className=\"text-2xl font-bold text-gray-900\">Watch & Learn</h2>\r\n                                    </div>\r\n                                    <div className=\"aspect-video w-full rounded-2xl overflow-hidden shadow-lg bg-gray-900\">\r\n                                        <iframe\r\n                                            width=\"100%\"\r\n                                            height=\"100%\"\r\n                                            src={getEmbedUrl(recipe.videoUrl)}\r\n                                            title=\"YouTube video player\"\r\n                                            frameBorder=\"0\"\r\n                                            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                                            allowFullScreen\r\n                                            className=\"w-full h-full\"\r\n                                        ></iframe>\r\n                                    </div>\r\n                                </section>\r\n                            )}\r\n\r\n                            {/* Instructions Section */}\r\n                            <section className=\"liquid-card p-5 sm:p-8\">\r\n                                <div className=\"flex flex-col sm:flex-row sm:items-center justify-between mb-8 pb-4 border-b border-gray-100 gap-4\">\r\n                                    <h2 className=\"text-2xl font-bold text-gray-900 flex items-center gap-2\">\r\n                                        <ChefHat className=\"w-6 h-6 text-primary-500\" />\r\n                                        Instructions\r\n                                    </h2>\r\n                                    <button\r\n                                        onClick={() => setCookMode(true)}\r\n                                        className=\"flex items-center justify-center gap-2 px-6 py-2.5 bg-gray-900 text-white font-bold rounded-xl shadow-lg hover:bg-gray-800 transition-colors\"\r\n                                    >\r\n                                        <PlayCircle className=\"w-5 h-5\" /> Enter Cook Mode\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"space-y-8\">\r\n                                    {recipe.steps.map((step, index) => (\r\n                                        <div key={index} className=\"flex gap-6 group\">\r\n                                            <div className=\"flex flex-col items-center\">\r\n                                                <div className=\"w-10 h-10 rounded-full bg-primary-50 text-primary-600 flex items-center justify-center font-bold text-lg mb-2 group-hover:bg-primary-500 group-hover:text-white transition-colors border-2 border-primary-100 shadow-sm\">\r\n                                                    {index + 1}\r\n                                                </div>\r\n                                                {index !== recipe.steps.length - 1 && (\r\n                                                    <div className=\"w-0.5 h-full bg-gray-100 group-hover:bg-primary-100 transition-colors\"></div>\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"py-2 flex-1 pb-8\">\r\n                                                <p className=\"text-gray-700 leading-relaxed text-lg\">{step}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </section>\r\n\r\n                            {/* Reviews & Ratings Section */}\r\n                            <section className=\"liquid-card p-5 sm:p-8\">\r\n                                <h2 className=\"text-2xl font-bold text-gray-900 mb-8 flex items-center gap-2\">\r\n                                    <MessageSquare className=\"w-6 h-6 text-primary-500\" />\r\n                                    Reviews ({recipe.numReviews || 0})\r\n                                </h2>\r\n\r\n                                {/* Add Review Form */}\r\n                                <div className=\"bg-gray-50 rounded-2xl p-6 mb-8 border border-gray-100\">\r\n                                    <h3 className=\"font-bold text-gray-900 mb-4\">Leave a Review</h3>\r\n                                    <div className=\"flex mb-4\">\r\n                                        {[1, 2, 3, 4, 5].map((star) => (\r\n                                            <button\r\n                                                key={star}\r\n                                                type=\"button\"\r\n                                                onClick={() => setRating(star)}\r\n                                                onMouseEnter={() => setHoverRating(star)}\r\n                                                onMouseLeave={() => setHoverRating(0)}\r\n                                                className=\"p-1 transition-transform hover:scale-110\"\r\n                                            >\r\n                                                <Star\r\n                                                    className={`w-8 h-8 transition-colors ${star <= (hoverRating || rating)\r\n                                                        ? 'text-orange-400 fill-orange-400'\r\n                                                        : 'text-gray-300'\r\n                                                        }`}\r\n                                                />\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                    <textarea\r\n                                        value={reviewComment}\r\n                                        onChange={(e) => setReviewComment(e.target.value)}\r\n                                        placeholder=\"Share your thoughts about this recipe... (optional)\"\r\n                                        className=\"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:border-primary-500 transition-all resize-none mb-4\"\r\n                                        rows=\"3\"\r\n                                    ></textarea>\r\n                                    <button\r\n                                        onClick={submitReview}\r\n                                        className=\"px-6 py-2.5 bg-primary-600 text-white font-bold rounded-xl shadow-md hover:bg-primary-500 transition-colors\"\r\n                                    >\r\n                                        Submit Review\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Reviews List */}\r\n                                {recipe.reviews && recipe.reviews.length > 0 ? (\r\n                                    <div className=\"space-y-6\">\r\n                                        {recipe.reviews.map((review, index) => (\r\n                                            <div key={index} className=\"border-b border-gray-100 pb-6 last:border-0 last:pb-0\">\r\n                                                <div className=\"flex items-center justify-between mb-2\">\r\n                                                    <div className=\"font-bold text-gray-900\">{review.name}</div>\r\n                                                    <div className=\"flex items-center text-orange-400 gap-1\">\r\n                                                        <span className=\"font-bold text-sm\">{review.rating}</span>\r\n                                                        <Star className=\"w-4 h-4 fill-current\" />\r\n                                                    </div>\r\n                                                </div>\r\n                                                {review.comment && <p className=\"text-gray-700\">{review.comment}</p>}\r\n                                                <div className=\"text-xs text-gray-400 mt-2\">\r\n                                                    {new Date(review.createdAt).toLocaleDateString()}\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"text-center text-gray-500 italic py-4\">No reviews yet. Be the first to rate!</div>\r\n                                )}\r\n                            </section>\r\n                        </div>\r\n\r\n                        {/* Sidebar: Ingredients */}\r\n                        <div className=\"lg:col-span-1 order-1 lg:order-2 animate-slide-up\" style={{ animationDelay: '0.3s' }}>\r\n\r\n                            {/* Region & Diet Details */}\r\n                            <div className=\"liquid-card p-6 mb-6 flex flex-col gap-4\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <MapPin className=\"w-5 h-5 text-gray-400\" />\r\n                                    <div>\r\n                                        <p className=\"text-xs text-gray-500 uppercase font-bold tracking-wider\">Region</p>\r\n                                        <p className=\"font-medium text-gray-900\">{recipe.region || 'Global'}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"w-5 h-5 flex items-center justify-center\"></div>\r\n                                    <div>\r\n                                        <p className=\"text-xs text-gray-500 uppercase font-bold tracking-wider\">Dietary Preference</p>\r\n                                        <p className=\"font-medium text-gray-900\">{recipe.dietType || 'Any'}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"sticky top-24 liquid-card p-5 sm:p-8\">\r\n                                <div className=\"flex items-center justify-between mb-6 pb-4 border-b border-gray-100\">\r\n                                    <h3 className=\"text-xl font-bold text-gray-900 flex items-center gap-2\">\r\n                                        <span>Ingredients</span>\r\n                                        <span className=\"text-sm font-medium text-gray-500 bg-gray-50 px-3 py-1 rounded-full ml-1\">\r\n                                            {recipe.ingredients.length}\r\n                                        </span>\r\n                                    </h3>\r\n                                    <button\r\n                                        onClick={handleGenerateGroceryList}\r\n                                        title=\"Generate Grocery List\"\r\n                                        className=\"p-2 text-primary-600 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors\"\r\n                                    >\r\n                                        <ShoppingCart className=\"w-5 h-5\" />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <ul className=\"space-y-4 mb-8\">\r\n                                    {recipe.ingredients.map((ingredient, i) => (\r\n                                        <li key={i} className=\"flex items-start gap-4 p-3 hover:bg-gray-50 rounded-xl transition-colors cursor-pointer group\">\r\n                                            <div className=\"mt-0.5 w-6 h-6 rounded-full border-2 border-gray-200 flex items-center justify-center flex-shrink-0 group-hover:border-primary-500 group-hover:bg-primary-50 transition-colors hidden sm:flex\">\r\n                                                <Check className=\"w-3 h-3 text-transparent group-hover:text-primary-600 transition-colors\" />\r\n                                            </div>\r\n                                            <span className=\"text-gray-700 font-medium group-hover:text-gray-900\">{ingredient}</span>\r\n                                        </li>\r\n                                    ))}\r\n                                </ul>\r\n\r\n                                <div className=\"bg-orange-50 rounded-2xl p-5 border border-orange-100 flex items-start gap-4\">\r\n                                    <div className=\"p-2 bg-orange-100 text-orange-600 rounded-xl\">\r\n                                        <ChefHat className=\"w-5 h-5\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"font-bold text-orange-900 text-sm mb-1\">Chilli's Tip</h4>\r\n                                        <p className=\"text-xs text-orange-800 leading-relaxed\">\r\n                                            Missing an ingredient? Use the AI Assistant to find a perfect substitution without ruining the dish!\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Cook Mode Modal */}\r\n            {\r\n                cookMode && (\r\n                    <div className=\"fixed inset-0 z-50 bg-white flex flex-col text-gray-900 overflow-hidden animate-fade-in\">\r\n                        {/* Progress Bar */}\r\n                        <div className=\"w-full h-2 bg-gray-100\">\r\n                            <div\r\n                                className=\"h-full bg-primary-500 transition-all duration-300\"\r\n                                style={{ width: `${((cookStep + 1) / recipe.steps.length) * 100}%` }}\r\n                            ></div>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 flex items-center justify-between\">\r\n                            <h2 className=\"text-lg font-bold text-gray-500\">Cook Mode</h2>\r\n                            <button\r\n                                onClick={() => { setCookMode(false); setCookStep(0); }}\r\n                                className=\"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors\"\r\n                            >\r\n                                <X className=\"w-6 h-6\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 overflow-y-auto px-6 py-10 flex flex-col items-center justify-center\">\r\n                            <div className=\"max-w-3xl w-full text-center\">\r\n                                <span className=\"inline-block px-4 py-1.5 bg-primary-100 text-primary-700 font-bold rounded-full text-sm mb-6\">\r\n                                    Step {cookStep + 1} of {recipe.steps.length}\r\n                                </span>\r\n                                <h1 className=\"text-3xl md:text-5xl font-extrabold leading-tight mb-12\">\r\n                                    {recipe.steps[cookStep]}\r\n                                </h1>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 flex items-center justify-between bg-white border-t border-gray-100 max-w-5xl mx-auto w-full\">\r\n                            <button\r\n                                onClick={prevCookStep}\r\n                                disabled={cookStep === 0}\r\n                                className={`flex items-center gap-2 px-6 py-4 rounded-xl font-bold transition-colors ${cookStep === 0 ? 'opacity-50 cursor-not-allowed bg-gray-100 text-gray-400' : 'bg-gray-100 hover:bg-gray-200 text-gray-800'}`}\r\n                            >\r\n                                <ChevronLeft className=\"w-5 h-5\" /> Previous\r\n                            </button>\r\n                            <button\r\n                                onClick={nextCookStep}\r\n                                disabled={cookStep === recipe.steps.length - 1}\r\n                                className={`flex items-center gap-2 px-8 py-4 rounded-xl font-bold transition-colors shadow-lg ${cookStep === recipe.steps.length - 1 ? 'opacity-50 cursor-not-allowed bg-primary-300 text-white shadow-none' : 'bg-primary-600 hover:bg-primary-500 text-white'}`}\r\n                            >\r\n                                Next Step <ChevronRight className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default RecipeDetail;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\Recipes.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  30 |\n  31 |         if (location.state?.category) {\n> 32 |             setActiveCategory(location.state.category);\n     |             ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  33 |         }\n  34 |         if (location.state?.searchTerm) {\n  35 |             setSearchTerm(location.state.searchTerm);","line":32,"column":13,"nodeType":null,"endLine":32,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport { Search, Clock, Flame, Star, Filter, Dices } from 'lucide-react';\r\nimport { recipes as initialRecipes } from '../data/mockRecipes';\r\n\r\nconst Recipes = () => {\r\n    const location = useLocation();\r\n    const [recipes, setRecipes] = useState(() => {\r\n        const saved = localStorage.getItem('chilli_recipes');\r\n        return saved ? JSON.parse(saved) : initialRecipes;\r\n    });\r\n    const [searchTerm, setSearchTerm] = useState(location.state?.searchTerm || '');\r\n    const [activeCategory, setActiveCategory] = useState(location.state?.category || 'All');\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchRecipes = async () => {\r\n            try {\r\n                const res = await fetch('/api/recipes');\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    setRecipes(data);\r\n                    localStorage.setItem('chilli_recipes', JSON.stringify(data));\r\n                }\r\n            } catch (err) {\r\n                console.error('API Error:', err);\r\n            }\r\n        };\r\n        fetchRecipes();\r\n\r\n        if (location.state?.category) {\r\n            setActiveCategory(location.state.category);\r\n        }\r\n        if (location.state?.searchTerm) {\r\n            setSearchTerm(location.state.searchTerm);\r\n        }\r\n    }, [location.state]);\r\n\r\n    const categories = ['All', 'Indian', 'Maharashtrian', 'Punjabi', 'South Indian', 'Gujarati', 'Bengal', 'Street Food', 'Italian', 'Chinese', 'Mexican', 'Thai', 'Japanese', 'American', 'Mediterranean', 'Main Course', 'Starter', 'Desserts', 'Breakfast', 'Snacks', 'Seafood', 'Healthy', 'Junk', 'Fat Lose', 'Weight Gain', 'Vegan', 'Quick & Easy'];\r\n\r\n    const handleSurpriseMe = () => {\r\n        if (recipes.length > 0) {\r\n            const randomRecipe = recipes[Math.floor(Math.random() * recipes.length)];\r\n            navigate(`/recipe/${randomRecipe.id}`);\r\n        }\r\n    };\r\n\r\n    const filteredRecipes = recipes.filter(recipe => {\r\n        const searchRaw = searchTerm.trim();\r\n        const searchLower = searchRaw.toLowerCase();\r\n\r\n        let matchesSearch = true;\r\n\r\n        if (searchRaw) {\r\n            // Escape regex chars to prevent crashes, then build a word-boundary regex for strict matching\r\n            const escapedSearch = searchRaw.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n            const searchRegex = new RegExp(`\\\\b${escapedSearch}\\\\b`, 'i');\r\n\r\n            matchesSearch = (recipe.title && searchRegex.test(recipe.title)) ||\r\n                (recipe.ingredients && Array.isArray(recipe.ingredients) && recipe.ingredients.some(i => searchRegex.test(i))) ||\r\n                (recipe.description && searchRegex.test(recipe.description));\r\n\r\n            // Fallback for languages/terms that don't play well with boundary chars, do a strict full includes if regex fails over tiny words\r\n            if (!matchesSearch && searchRaw.length > 2) {\r\n                matchesSearch = (recipe.title && recipe.title.toLowerCase().includes(searchLower)) ||\r\n                    (recipe.ingredients && Array.isArray(recipe.ingredients) && recipe.ingredients.some(i => i.toLowerCase().includes(searchLower))) ||\r\n                    (recipe.description && recipe.description.toLowerCase().includes(searchLower));\r\n            }\r\n        }\r\n\r\n        // Match standard category, new region, or new diet type\r\n        const matchesCategory = activeCategory === 'All' ||\r\n            recipe.category === activeCategory ||\r\n            recipe.region === activeCategory ||\r\n            recipe.dietType === activeCategory;\r\n\r\n        return matchesSearch && matchesCategory;\r\n    });\r\n\r\n    return (\r\n        <div className=\"min-h-screen pt-24 pb-12 relative z-0\">\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n\r\n                {/* Header & Search */}\r\n                <div className=\"mb-8 sm:mb-12 animate-slide-up\">\r\n                    <h1 className=\"text-3xl sm:text-4xl font-extrabold text-gray-900 mb-6\">\r\n                        Explore <span className=\"text-gradient\">Recipes</span>\r\n                    </h1>\r\n\r\n                    <div className=\"flex flex-col md:flex-row gap-4\">\r\n                        <div className=\"flex-1 relative\">\r\n                            <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                <Search className=\"h-5 w-5 text-gray-400\" />\r\n                            </div>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search by recipe name or ingredient (e.g. paneer, tomato...)\"\r\n                                className=\"w-full pl-12 pr-4 py-4 rounded-2xl border-none shadow-sm focus:ring-2 focus:ring-primary-500 transition-all font-medium text-gray-800 bg-white/70 backdrop-blur-md\"\r\n                                value={searchTerm}\r\n                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                            />\r\n                        </div>\r\n                        <button className=\"hidden md:flex items-center justify-center gap-2 px-6 py-4 glass-panel rounded-2xl text-gray-900 hover:text-primary-700 transition-colors font-bold\">\r\n                            <Filter className=\"w-5 h-5\" />\r\n                            Filters\r\n                        </button>\r\n                        <button\r\n                            onClick={handleSurpriseMe}\r\n                            className=\"flex items-center justify-center gap-2 px-6 py-4 bg-primary-600 rounded-2xl text-white hover:bg-primary-500 transition-colors font-bold shadow-lg shadow-primary-500/30\"\r\n                        >\r\n                            <Dices className=\"w-5 h-5\" />\r\n                            Surprise Me\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Categories */}\r\n                <div className=\"flex overflow-x-auto pb-4 mb-8 gap-2 sm:gap-3 custom-scrollbar animate-slide-up\" style={{ animationDelay: '0.1s' }}>\r\n                    {categories.map((cat) => (\r\n                        <button\r\n                            key={cat}\r\n                            onClick={() => setActiveCategory(cat)}\r\n                            className={`px-4 sm:px-6 py-2 sm:py-2.5 rounded-full text-sm font-medium whitespace-nowrap transition-all ${activeCategory === cat\r\n                                ? 'liquid-button'\r\n                                : 'glass-panel text-gray-800 hover:text-primary-600 font-semibold'\r\n                                }`}\r\n                        >\r\n                            {cat}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Recipe Grid */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-y-12 gap-x-8 sm:gap-8\">\r\n                    {filteredRecipes.map((recipe, index) => (\r\n                        <Link\r\n                            to={`/recipe/${recipe.id}`}\r\n                            state={{ fromSearch: true }}\r\n                            key={recipe.id}\r\n                            className=\"group liquid-card block animate-slide-up\"\r\n                            style={{ animationDelay: `${0.1 * (index + 2)}s` }}\r\n                        >\r\n                            {/* Image Container */}\r\n                            <div className=\"relative h-56 overflow-hidden\">\r\n                                <img\r\n                                    src={recipe.image || 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c'}\r\n                                    onError={(e) => { e.target.onerror = null; e.target.src = 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c' }}\r\n                                    alt={recipe.title}\r\n                                    className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 transform-gpu\"\r\n                                />\r\n                                <div className=\"absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-2.5 py-1 rounded-full flex items-center gap-1 shadow-sm\">\r\n                                    <Star className=\"w-3.5 h-3.5 text-orange-500 fill-orange-500\" />\r\n                                    <span className=\"text-xs font-bold text-gray-800\">{recipe.rating ? recipe.rating.toFixed(1) : 'New'}</span>\r\n                                </div>\r\n                                {/* Save Button overlay */}\r\n                                <div className=\"absolute top-4 left-4 p-2 bg-white/40 backdrop-blur-md rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-white text-gray-800 hover:text-primary-500\">\r\n                                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path></svg>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Content */}\r\n                            <div className=\"p-6\">\r\n                                <div className=\"flex items-center gap-2 mb-3\">\r\n                                    <span className=\"px-2.5 py-1 bg-primary-50 text-primary-600 text-xs font-semibold rounded-lg uppercase tracking-wide\">\r\n                                        {recipe.category}\r\n                                    </span>\r\n                                </div>\r\n                                <h3 className=\"text-xl font-bold text-gray-900 mb-4 line-clamp-1 group-hover:text-primary-600 transition-colors\">\r\n                                    {recipe.title}\r\n                                </h3>\r\n\r\n                                <div className=\"flex items-center justify-between text-sm text-gray-500 border-t border-gray-100 pt-4\">\r\n                                    <div className=\"flex items-center gap-1.5\">\r\n                                        <Clock className=\"w-4 h-4 text-gray-400\" />\r\n                                        <span className=\"font-medium\">{recipe.time}</span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-1.5\">\r\n                                        <Flame className=\"w-4 h-4 text-orange-400\" />\r\n                                        <span className=\"font-medium\">{recipe.difficulty}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Link>\r\n                    ))}\r\n                </div>\r\n\r\n                {filteredRecipes.length === 0 && (\r\n                    <div className=\"text-center py-20 animate-fade-in\">\r\n                        <div className=\"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gray-100 mb-6\">\r\n                            <Search className=\"w-10 h-10 text-gray-400\" />\r\n                        </div>\r\n                        <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">No recipes found</h3>\r\n                        <p className=\"text-gray-500 max-w-md mx-auto\">\r\n                            We couldn't find any recipes matching your search. Try different ingredients or search terms.\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Recipes;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\Register.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\src\\pages\\UploadRecipe.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":88,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ChefHat, ImageIcon, Plus, Trash2, Clock, Flame, Image as LuImage, Save } from 'lucide-react';\r\n\r\nconst UploadRecipe = () => {\r\n    const navigate = useNavigate();\r\n    const storedUser = JSON.parse(localStorage.getItem('chilli_user'));\r\n\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        category: 'Main Course',\r\n        time: '',\r\n        difficulty: 'Medium',\r\n        description: '',\r\n        ingredients: [''],\r\n        steps: [''],\r\n        image: ''\r\n    });\r\n\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [message, setMessage] = useState('');\r\n\r\n    if (!storedUser) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center p-4\">\r\n                <div className=\"text-center\">\r\n                    <h2 className=\"text-2xl font-bold mb-4\">Please login to upload a recipe</h2>\r\n                    <button onClick={() => navigate('/login')} className=\"liquid-button px-6 py-2\">Login</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const categories = ['Indian', 'Italian', 'Chinese', 'Main Course', 'Starter', 'Desserts', 'Breakfast', 'Snacks', 'Healthy', 'Vegan'];\r\n\r\n    const handleInputChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleArrayChange = (index, type, value) => {\r\n        const newArray = [...formData[type]];\r\n        newArray[index] = value;\r\n        setFormData({ ...formData, [type]: newArray });\r\n    };\r\n\r\n    const addArrayItem = (type) => {\r\n        setFormData({ ...formData, [type]: [...formData[type], ''] });\r\n    };\r\n\r\n    const removeArrayItem = (index, type) => {\r\n        const newArray = formData[type].filter((_, i) => i !== index);\r\n        setFormData({ ...formData, [type]: newArray });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setIsSubmitting(true);\r\n        setMessage('');\r\n\r\n        // Basic validation\r\n        if (!formData.title || !formData.time || formData.ingredients[0] === '' || formData.steps[0] === '') {\r\n            setMessage('Please fill all required fields');\r\n            setIsSubmitting(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const payload = {\r\n                ...formData,\r\n                author: storedUser.id,\r\n                status: 'pending'\r\n            };\r\n\r\n            const res = await fetch('/api/recipes', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify(payload)\r\n            });\r\n\r\n            if (res.ok) {\r\n                setMessage('Recipe submitted successfully! It is pending approval from an admin.');\r\n                setTimeout(() => navigate('/profile'), 3000);\r\n            } else {\r\n                setMessage('Failed to submit recipe. Please try again.');\r\n            }\r\n        } catch (error) {\r\n            setMessage('Server error submitting recipe.');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen pt-32 pb-20 relative z-0\">\r\n            <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"text-center mb-10 animate-slide-up\">\r\n                    <h1 className=\"text-4xl font-extrabold text-gray-900 mb-4\">\r\n                        Upload <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-primary-500 to-orange-500\">Your Recipe</span>\r\n                    </h1>\r\n                    <p className=\"text-gray-600\">Share your culinary creations with the Chilli community.</p>\r\n                </div>\r\n\r\n                <div className=\"liquid-card p-6 md:p-10 animate-slide-up\" style={{ animationDelay: '0.1s' }}>\r\n                    {message && (\r\n                        <div className={`p-4 rounded-xl mb-6 font-medium text-sm ${message.includes('success') ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\r\n                            {message}\r\n                        </div>\r\n                    )}\r\n\r\n                    <form onSubmit={handleSubmit} className=\"space-y-8\">\r\n                        {/* Title & Category */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Recipe Title *</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"title\"\r\n                                    value={formData.title}\r\n                                    onChange={handleInputChange}\r\n                                    className=\"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-colors\"\r\n                                    placeholder=\"e.g. Spicy Paneer Tikka\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Category *</label>\r\n                                <select\r\n                                    name=\"category\"\r\n                                    value={formData.category}\r\n                                    onChange={handleInputChange}\r\n                                    className=\"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-colors\"\r\n                                >\r\n                                    {categories.map(cat => (\r\n                                        <option key={cat} value={cat}>{cat}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Image URL */}\r\n                        <div>\r\n                            <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Image URL (Optional)</label>\r\n                            <div className=\"relative\">\r\n                                <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                    <LuImage className=\"h-5 w-5 text-gray-400\" />\r\n                                </div>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"image\"\r\n                                    value={formData.image}\r\n                                    onChange={handleInputChange}\r\n                                    className=\"w-full pl-11 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-colors\"\r\n                                    placeholder=\"https://example.com/image.jpg\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Time & Difficulty */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Cooking Time *</label>\r\n                                <div className=\"relative\">\r\n                                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                        <Clock className=\"h-5 w-5 text-gray-400\" />\r\n                                    </div>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"time\"\r\n                                        value={formData.time}\r\n                                        onChange={handleInputChange}\r\n                                        className=\"w-full pl-11 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-colors\"\r\n                                        placeholder=\"e.g. 30 mins\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Difficulty *</label>\r\n                                <div className=\"relative\">\r\n                                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                        <Flame className=\"h-5 w-5 text-gray-400\" />\r\n                                    </div>\r\n                                    <select\r\n                                        name=\"difficulty\"\r\n                                        value={formData.difficulty}\r\n                                        onChange={handleInputChange}\r\n                                        className=\"w-full pl-11 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-colors\"\r\n                                    >\r\n                                        <option value=\"Easy\">Easy</option>\r\n                                        <option value=\"Medium\">Medium</option>\r\n                                        <option value=\"Hard\">Hard</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Description */}\r\n                        <div>\r\n                            <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Short Description</label>\r\n                            <textarea\r\n                                name=\"description\"\r\n                                value={formData.description}\r\n                                onChange={handleInputChange}\r\n                                rows=\"3\"\r\n                                className=\"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-colors resize-none\"\r\n                                placeholder=\"Tell us about this dish...\"\r\n                            ></textarea>\r\n                        </div>\r\n\r\n                        {/* Ingredients */}\r\n                        <div>\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                                <label className=\"block text-sm font-semibold text-gray-700\">Ingredients *</label>\r\n                                <button type=\"button\" onClick={() => addArrayItem('ingredients')} className=\"text-primary-600 hover:text-primary-700 text-sm font-bold flex items-center gap-1\">\r\n                                    <Plus className=\"w-4 h-4\" /> Add\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"space-y-3\">\r\n                                {formData.ingredients.map((ingredient, index) => (\r\n                                    <div key={index} className=\"flex gap-2\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={ingredient}\r\n                                            onChange={(e) => handleArrayChange(index, 'ingredients', e.target.value)}\r\n                                            className=\"flex-1 px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-colors\"\r\n                                            placeholder={`Ingredient ${index + 1}`}\r\n                                            required\r\n                                        />\r\n                                        {formData.ingredients.length > 1 && (\r\n                                            <button type=\"button\" onClick={() => removeArrayItem(index, 'ingredients')} className=\"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition-colors\">\r\n                                                <Trash2 className=\"w-5 h-5\" />\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Steps */}\r\n                        <div>\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                                <label className=\"block text-sm font-semibold text-gray-700\">Cooking Steps *</label>\r\n                                <button type=\"button\" onClick={() => addArrayItem('steps')} className=\"text-primary-600 hover:text-primary-700 text-sm font-bold flex items-center gap-1\">\r\n                                    <Plus className=\"w-4 h-4\" /> Add Step\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"space-y-3\">\r\n                                {formData.steps.map((step, index) => (\r\n                                    <div key={index} className=\"flex gap-2 items-start\">\r\n                                        <span className=\"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 font-bold rounded-lg mt-0.5\">{index + 1}</span>\r\n                                        <textarea\r\n                                            value={step}\r\n                                            onChange={(e) => handleArrayChange(index, 'steps', e.target.value)}\r\n                                            rows=\"2\"\r\n                                            className=\"flex-1 px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-colors resize-none\"\r\n                                            placeholder={`Describe step ${index + 1}`}\r\n                                            required\r\n                                        ></textarea>\r\n                                        {formData.steps.length > 1 && (\r\n                                            <button type=\"button\" onClick={() => removeArrayItem(index, 'steps')} className=\"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition-colors mt-0.5\">\r\n                                                <Trash2 className=\"w-5 h-5\" />\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"pt-4 border-t border-gray-100 flex justify-end\">\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isSubmitting}\r\n                                className=\"liquid-button px-8 py-3 w-full md:w-auto flex items-center justify-center gap-2\"\r\n                            >\r\n                                <Save className=\"w-5 h-5\" />\r\n                                {isSubmitting ? 'Submitting...' : 'Submit Recipe'}\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UploadRecipe;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\shubham\\Chilli\\frontend\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]